Gem_Level_1 = { 5001, 5011, 5021, 5031, 5041, 5071, 5081, 5091, 5101, 5111, 5121 };
Gem_Level_2 = { 5002, 5012, 5022, 5032, 5042, 5072, 5082, 5092, 5102, 5112, 5122 };
Gem_Level_3 = { 5003, 5013, 5023, 5033, 5043, 5073, 5083, 5093, 5103, 5113, 5123 };

Green_Equip_Level_20 = {101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114 };
Green_Equip_Level_30 = {161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174};
Green_Equip_Level_40 = {221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234};
Green_Equip_Level_50 = {421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434};
Green_Equip_Level_60 = {621, 622, 623, 624, 625, 626, 627, 628, 629, 630, 631, 632, 633, 634};
Green_Equip_Level_70 = {821, 822, 823, 824, 825, 826, 827, 828, 829, 830, 831, 832, 833, 834};
Green_Equip_Level_80 = {1021, 1022, 1023, 1024, 1025, 1026, 1027, 1028, 1029, 1030, 1031, 1032, 1033, 1034};

Blue_Equip_Level_20 = {121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134};
Blue_Equip_Level_30 = {181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194};
Blue_Equip_Level_40 = {241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254};
Blue_Equip_Level_50 = {441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454};
Blue_Equip_Level_60 = {641, 642, 643, 644, 645, 646, 647, 648, 649, 650, 651, 652, 653, 654};
Blue_Equip_Level_70 = {841, 842, 843, 844, 845, 846, 847, 848, 849, 850, 851, 852, 853, 854};
Blue_Equip_Level_80 = {1041, 1042, 1043, 1044, 1045, 1046, 1047, 1048, 1049, 1050, 1051, 1052, 1053, 1054};

Purple_Equip_Level_40 = {261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274,
 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 
301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 
321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 334};
Purple_Equip_Level_50 = {461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474,
481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 
501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 512, 513, 514, 
521, 522, 523, 524, 525, 526, 527, 528, 529, 530, 531, 532, 533, 534};
Purple_Equip_Level_60 = {661, 662, 663, 664, 665, 666, 667, 668, 669, 670, 671, 672, 673, 674, 
681, 682, 683, 684, 685, 686, 687, 688, 689, 690, 691, 692, 693, 694, 
701, 702, 703, 704, 705, 706, 707, 708, 709, 710, 711, 712, 713, 714, 
721, 722, 723, 724, 725, 726, 727, 728, 729, 730, 731, 732, 733, 734};
Purple_Equip_Level_70 = {861, 862, 863, 864, 865, 866, 867, 868, 869, 870, 871, 872, 873, 874, 
881, 882, 883, 884, 885, 886, 887, 888, 889, 890, 891, 892, 893, 894, 
901, 902, 903, 904, 905, 906, 907, 908, 909, 910, 911, 912, 913, 914, 
921, 922, 923, 924, 925, 926, 927, 928, 929, 930, 931, 932, 933, 934};
Purple_Equip_Level_80 = {1061, 1062, 1063, 1064, 1065, 1066, 1067, 1068, 1069, 1070, 1071, 1072, 1073, 1074, 
1081, 1082, 1083, 1084, 1085, 1086, 1087, 1088, 1089, 1090, 1091, 1092, 1093, 1094, 
1101, 1102, 1103, 1104, 1105, 1106, 1107, 1108, 1109, 1110, 1111, 1112, 1113, 1114, 
1121, 1122, 1123, 1124, 1125, 1126, 1127, 1128, 1129, 1130, 1131, 1132, 1133, 1134};
Purple_Equip_Level_90 = {1661, 1662, 1663, 1664, 1665, 1666, 1667, 1668, 1669, 1670, 1671, 1672, 1673, 1674};
Purple_Equip_Level_100 = {1761, 1762, 1763, 1764, 1765, 1766, 1767, 1768, 1769, 1770, 1771, 1772, 1773, 1774};

Orange_Equip_Level_50 = {1521, 1522, 1523, 1524, 1525, 1526, 1527, 1528, 1529, 1530, 1531, 1532, 1533, 1534, 1541, 1542, 1543, 1544, 1545, 1546, 1547, 1548, 1549, 1550, 1551, 1552, 1553, 1554}
Orange_Equip_Level_70 = {1561, 1562, 1563, 1564, 1565, 1566, 1567, 1568, 1569, 1570, 1571, 1572, 1573, 1574, 1581, 1582, 1583, 1584, 1585, 1586, 1587, 1588, 1589, 1590, 1591, 1592, 1593, 1594}
Orange_Equip_Level_80 = {1601, 1602, 1603, 1604, 1605, 1606, 1607, 1608, 1609, 1610, 1611, 1612, 1613, 1614, 1621, 1622, 1623, 1624, 1625, 1626, 1627, 1628, 1629, 1630, 1631, 1632, 1633, 1634}
Orange_Equip_Level_90 = {1681, 1682, 1683, 1684, 1685, 1686, 1687, 1688, 1689, 1690, 1691, 1692, 1693, 1694, 1701, 1702, 1703, 1704, 1705, 1706, 1707, 1708, 1709, 1710, 1711, 1712, 1713, 1714}
Orange_Equip_Level_100 = {1721, 1722, 1723, 1724, 1725, 1726, 1727, 1728, 1729, 1730, 1731, 1732, 1733, 1734, 1741, 1742, 1743, 1744, 1745, 1746, 1747, 1748, 1749, 1750, 1751, 1752, 1753, 1754}



Athletics_Green_Equip_Level_30 = {
    2024, 2025, 2026, 2027, 2028, 2029, 2030, 2031, 2032, 2033, 2034, 2035, 2036, 2037, 2038, 2039, 2040, 2041, 2042, 2043, 2044, 2045, 2046, 2047}
Athletics_Blue_Equip_Level_30 = {
    2208, 2209, 2210, 2211, 2212, 2213, 2214, 2215, 2216, 2217, 2218, 2219, 2220, 2221, 2222, 2223, 2224, 2225, 2226, 2227, 2228, 2229, 2230, 2231}

Athletics_Purple_Equip_Level_40 = {
    2376, 2377, 2378, 2379, 2380, 2381, 2382, 2383, 2384, 2385, 2386, 2387, 2388, 2389, 2390, 2391, 2392, 2393, 2394, 2395, 2396, 2397, 2398, 2399}
Athletics_Green_Equip_Level_40 = {
    2048, 2049, 2050, 2051, 2052, 2053, 2054, 2055, 2056, 2057, 2058, 2059, 2060, 2061, 2062, 2063, 2064, 2065, 2066, 2067, 2068, 2069, 2070, 2071}
Athletics_Blue_Equip_Level_40 = {
    2232, 2233, 2234, 2235, 2236, 2237, 2238, 2239, 2240, 2241, 2242, 2243, 2244, 2245, 2246, 2247, 2248, 2249, 2250, 2251, 2252, 2253, 2254, 2255}

Athletics_Purple_Equip_Level_50 = {
    2400, 2401, 2402, 2403, 2404, 2405, 2406, 2407, 2408, 2409, 2410, 2411, 2412, 2413, 2414, 2415, 2416, 2417, 2418, 2419, 2420, 2421, 2422, 2423}
Athletics_Green_Equip_Level_50 = {
    2072, 2073, 2074, 2075, 2076, 2077, 2078, 2079, 2080, 2081, 2082, 2083, 2084, 2085, 2086, 2087, 2088, 2089, 2090, 2091, 2092, 2093, 2094, 2095}
Athletics_Blue_Equip_Level_50 = {
    2256, 2257, 2258, 2259, 2260, 2261, 2262, 2263, 2264, 2265, 2266, 2267, 2268, 2269, 2270, 2271, 2272, 2273, 2274, 2275, 2276, 2277, 2278, 2279}
Athletics_Orange_Equip_Level_50 = {
    2544, 2545, 2546, 2547, 2548, 2549, 2550, 2551, 2552, 2553, 2554, 2555, 2556, 2557, 2558, 2559, 2560, 2561, 2562, 2563, 2564, 2565, 2566, 2567}

Athletics_Purple_Equip_Level_60 = {
    2424, 2425, 2426, 2427, 2428, 2429, 2430, 2431, 2432, 2433, 2434, 2435, 2436, 2437, 2438, 2439, 2440, 2441, 2442, 2443, 2444, 2445, 2446, 2447}
Athletics_Green_Equip_Level_60 = {
    2096, 2097, 2098, 2099, 2100, 2101, 2102, 2103, 2104, 2105, 2106, 2107, 2108, 2109, 2110, 2111, 2112, 2113, 2114, 2115, 2116, 2117, 2118, 2119}
Athletics_Blue_Equip_Level_60 = {
    2280, 2281, 2282, 2283, 2284, 2285, 2286, 2287, 2288, 2289, 2290, 2291, 2292, 2293, 2294, 2295, 2296, 2297, 2298, 2299, 2300, 2301, 2302, 2303}
Athletics_Orange_Equip_Level_60 = {
    2568, 2569, 2570, 2571, 2572, 2573, 2574, 2575, 2576, 2577, 2578, 2579, 2580, 2581, 2582, 2583, 2584, 2585, 2586, 2587, 2588, 2589, 2590, 2591}

Athletics_Purple_Equip_Level_70 = {
    2448, 2449, 2450, 2451, 2452, 2453, 2454, 2455, 2456, 2457, 2458, 2459, 2460, 2461, 2462, 2463, 2464, 2465, 2466, 2467, 2468, 2469, 2470, 2471}
Athletics_Green_Equip_Level_70 = {
    2120, 2121, 2122, 2123, 2124, 2125, 2126, 2127, 2128, 2129, 2130, 2131, 2132, 2133, 2134, 2135, 2136, 2137, 2138, 2139, 2140, 2141, 2142, 2143}
Athletics_Blue_Equip_Level_70 = {
    2304, 2305, 2306, 2307, 2308, 2309, 2310, 2311, 2312, 2313, 2314, 2315, 2316, 2317, 2318, 2319, 2320, 2321, 2322, 2323, 2324, 2325, 2326, 2327}
Athletics_Orange_Equip_Level_70 = {
    2592, 2593, 2594, 2595, 2596, 2597, 2598, 2599, 2600, 2601, 2602, 2603, 2604, 2605, 2606, 2607, 2608, 2609, 2610, 2611, 2612, 2613, 2614, 2615}

Athletics_Purple_Equip_Level_80 = {
    2472, 2473, 2474, 2475, 2476, 2477, 2478, 2479, 2480, 2481, 2482, 2483, 2484, 2485, 2486, 2487, 2488, 2489, 2490, 2491, 2492, 2493, 2494, 2495}
Athletics_Green_Equip_Level_80 = {
    2144, 2145, 2146, 2147, 2148, 2149, 2150, 2151, 2152, 2153, 2154, 2155, 2156, 2157, 2158, 2159, 2160, 2161, 2162, 2163, 2164, 2165, 2166, 2167}
Athletics_Blue_Equip_Level_80 = {
    2328, 2329, 2330, 2331, 2332, 2333, 2334, 2335, 2336, 2337, 2338, 2339, 2340, 2341, 2342, 2343, 2344, 2345, 2346, 2347, 2348, 2349, 2350, 2351}

Athletics_Purple_Equip_Level_90 = {
    2496, 2497, 2498, 2499, 2500, 2501, 2502, 2503, 2504, 2505, 2506, 2507, 2508, 2509, 2510, 2511, 2512, 2513, 2514, 2515, 2516, 2517, 2518, 2519}
Athletics_Green_Equip_Level_90 = {
    2168, 2169, 2170, 2171, 2172, 2173, 2174, 2175, 2176, 2177, 2178, 2179, 2180, 2181, 2182, 2183, 2184, 2185, 2186, 2187, 2188, 2189, 2190, 2191}
Athletics_Blue_Equip_Level_90 = {
    2352, 2353, 2354, 2355, 2356, 2357, 2358, 2359, 2360, 2361, 2362, 2363, 2364, 2365, 2366, 2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375}


Athletics_Purple_Equip_Level_100 = {
    2520, 2521, 2522, 2523, 2524, 2525, 2526, 2527, 2528, 2529, 2530, 2531, 2532, 2533, 2534, 2535, 2536, 2537, 2538, 2539, 2540, 2541, 2542, 2543}


local Athletics_Green_Equip = {
    [30] = Athletics_Green_Equip_Level_30,
    [40] = Athletics_Green_Equip_Level_40,
    [50] = Athletics_Green_Equip_Level_50,
    [60] = Athletics_Green_Equip_Level_60,
    [70] = Athletics_Green_Equip_Level_70,
    [80] = Athletics_Green_Equip_Level_80,
    [90] = Athletics_Green_Equip_Level_90
}

Athletics_Blue_Equip = {
    [30] = Athletics_Blue_Equip_Level_30,
    [40] = Athletics_Blue_Equip_Level_40,
    [50] = Athletics_Blue_Equip_Level_50,
    [60] = Athletics_Blue_Equip_Level_60,
    [70] = Athletics_Blue_Equip_Level_70,
    [80] = Athletics_Blue_Equip_Level_80,
    [90] = Athletics_Blue_Equip_Level_90
}

Athletics_Purple_Equip = {
    [40] = Athletics_Purple_Equip_Level_40,
    [50] = Athletics_Purple_Equip_Level_50,
    [60] = Athletics_Purple_Equip_Level_60,
    [70] = Athletics_Purple_Equip_Level_70,
    [80] = Athletics_Purple_Equip_Level_80,
    [90] = Athletics_Purple_Equip_Level_90,
    [100] = Athletics_Purple_Equip_Level_100
}

Athletics_Orange_Equip = {
    [50] = Athletics_Orange_Equip_Level_50,
    [60] = Athletics_Orange_Equip_Level_60,
    [70] = Athletics_Orange_Equip_Level_70
}


Purple_Favor = {5813,5814,5815,5816,5817,5818,5819}
Orange_Favor = {5820,5821,5822,5823,5824}
Diety_Favor = {5825, 5826, 5827, 5828}

CittaBookBase = 1200

FormationBookBase  = 1000

function BroadCastEquip1(playercountry, playername, boxname, equipname1)
	Broadcast(0x17, "[p:"..playercountry..":"..playername.."]幸运地从[e:5:"..boxname.."]中开出了[e:5:"..equipname1.."]");
end
function BroadCastEquip2(playercountry, playername, boxname, equipname1, equipname2)
	Broadcast(0x17, "[p:"..playercountry..":"..playername.."]幸运地从[e:5:"..boxname.."]中开出了[e:5:"..equipname1.."],[e:5:"..equipname2.."]");
end

function ItemNormal_AddBuff(obj, idx, num, count, max_num)
  local now = os.time()
  local num2 = obj:getBuffData(idx);
  if num2 > now then
    num2 = num2 - now
    if num2 >= max_num then
      return false
    end
  else
    num2 = 0
  end
  num2 = num2 + num * count
  if num2 >= max_num then
    num2 = max_num
  end
  obj:setBuffData(idx, num2 + now, true)
  return true
end

function ItemNormal_00000001(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  if player:hasFlag(9) then
    player:sendMsgCode(2, 1054, 0)
    return false
  end
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
	local hp = fgt:getCurrentHP();
	if hp == 0 then
		return false;
	end
	hp = num * 300;
	fgt:regenHP(hp);
	package:DelItemSendMsg(1, player);
	return num;
end


function ItemNormal_00008901(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  if player:hasFlag(9) then
    player:sendMsgCode(2, 1054, 0)
    return false
  end
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
	local hp = fgt:getCurrentHP();
	if hp == 0 then
		return false;
	end
	hp = num * 600;
	fgt:regenHP(hp);
	package:DelItemSendMsg(8901, player);
	return num;
end

function ItemNormal_00008902(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  if player:hasFlag(9) then
    player:sendMsgCode(2, 1054, 0)
    return false
  end
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
	local hp = fgt:getCurrentHP();
	if hp == 0 then
		return false;
	end
	hp = num * 1200;
	fgt:regenHP(hp);
	package:DelItemSendMsg(8902, player);
	return num;
end

function ItemNormal_00008903(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  if player:hasFlag(9) then
    player:sendMsgCode(2, 1054, 0)
    return false
  end
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
	local hp = fgt:getCurrentHP();
	if hp == 0 then
		return false;
	end
	hp = num * 2000;
	fgt:regenHP(hp);
	package:DelItemSendMsg(8903, player);
	return num;	
end

function ItemNormal_00008904(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  if player:hasFlag(9) then
    player:sendMsgCode(2, 1054, 0)
    return false
  end
  if player:regenHP(num*300) then
	package:DelItemSendMsg(8904, player);
	return num;
  else
	return false;
  end
end

function ItemNormal_00008905(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  if player:hasFlag(9) then
    player:sendMsgCode(2, 1054, 0)
    return false
  end
  if player:regenHP(num*800) then
	package:DelItemSendMsg(8905, player);
	return num;
  else
    return false;
  end
end

function ItemNormal_00008906(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  if player:hasFlag(9) then
    player:sendMsgCode(2, 1054, 0)
    return false
  end
  if player:regenHP(num*1500) then
	package:DelItemSendMsg(8906, player);
	return num;
  else
    return false;
  end
end

function ItemNormal_00008907(iid, num, bind, param)
  local player = GetPlayer();
  local package = player:GetPackage();
  if player:hasFlag(9) then
    player:sendMsgCode(2, 1054, 0)
    return false
  end
  if player:regenHP(num*3000) then
    package:DelItemSendMsg(8907, player);
	return num;
  else
    return false;
  end
end

function ItemNormal_00000026(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  player:setBuffData(2, 0, true)
  player:setBuffData(3, 0, true)
  if ItemNormal_AddBuff(player, 1, 3600, num, 86400) then
  	package:DelItemSendMsg(26, player);
	return num;
  else
	return false;
  end
end

function ItemNormal_00000027(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
    local reqGrids = 3;
    if reqGrids <= 	package:GetRestPackageSize() then
        package:DelItemSendMsg(27, player);
        package:AddEquip(1636, 1);
        package:AddItem(508, 7, 1, 0, 2);
        package:AddItem(506, 7, 1, 0, 2);
        return num;
    end
    player:sendMsgCode(2, 1011, 0);
    return false;
end

function ItemNormal_00000028(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
    local reqGrids = 3;
    if reqGrids <= 	package:GetRestPackageSize() then
        package:DelItemSendMsg(28, player);
        package:AddEquip(1636, 1);
        package:AddItem(514, 15, 1, 0, 2);
        package:AddItem(515, 15, 1, 0, 2);
        return num;
    end
    player:sendMsgCode(2, 1011, 0);
    return false;
end

function ItemNormal_00000038(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  player:setBuffData(2, 0, true)
  player:setBuffData(3, 0, true)
  if ItemNormal_AddBuff(player, 1, 3600, num, 86400) then
  	package:DelItemSendMsg(38, player);
	return num;
  else
	return false;
  end
end

function ItemNormal_00000039(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  player:setBuffData(1, 0, true)
  player:setBuffData(3, 0, true)
  if ItemNormal_AddBuff(player, 2, 3600, num, 86400) then
  	package:DelItemSendMsg(39, player);
	return num;
  else
	return false;
  end
end

function ItemNormal_00000040(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  player:setBuffData(1, 0, true)
  player:setBuffData(2, 0, true)
  if ItemNormal_AddBuff(player, 3, 3600, num, 86400) then
  	package:DelItemSendMsg(40, player);
	return num;
  else
	return false;
  end
end

function ItemNormal_00000008(iid, num, bind, param)
    local player = GetPlayer()
    local package = player:GetPackage();
    if package:GetRestPackageSize() < 1 then		
        player:sendMsgCode(2, 1011, 0);
        return false;
    end
    local prob = {15, 29, 32, 45, 53, 58, 73, 86, 98, 100,}
    local items = {{9,1}, {514,1}, {515,1}, {500,1}, {49,1}, {503,1}, {511,1}, {517,1}, {15,2}, {0,0},}

    local p = math.random(1, 100)
    local i = 1
    for n = 1, #prob do
        if p <= prob[n] then
            i = n
            break
        end
    end

    local item = items[i]
    if item[1] == 0 then
        local equip = getRandOEquip(player:GetLev())
		package:AddEquip(equip, 1, false);
        if i == 2 or i == 3 or i == 6 or i == 8 or i == 10 then
            Broadcast(0x27, "恭喜[p:"..player:getCountry()..":"..player:getPName().."]使用【感恩节大餐】，获得[4:"..equip.."]");
        end
    else
        package:AddItem(item[1], item[2], true, false, 2);
        if i == 2 or i == 3 or i == 6 or i == 8 or i == 10 then
            Broadcast(0x27, "恭喜[p:"..player:getCountry()..":"..player:getPName().."]使用【感恩节大餐】，获得[4:"..item[1].."]x"..item[2]);
        end
    end
    package:DelItemSendMsg(8, player);
    return num
end

function ItemNormal_00000009(iid, num, bind, param)
  local player = GetPlayer()
  if player:hasFlag(73) then
    player:sendMsgCode(2, 1054, 0)
    return false;
  end
  local num2 = player:getBuffData(0)
  local package = player:GetPackage();
  if num2 >= 10000000 then
    return false
  end
  num2 = num2 + 1000000 * num
  if num2 > 10000000 then
    num2 = 10000000
  end
  player:setBuffData(0, num2, true);
  player:autoRegenAll();
  package:DelItemSendMsg(9, player);
  return num
end

function ItemNormal_00008931(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  package:DelItemSendMsg(8931, player);
  player:moveToHome()
  return num
end

function ItemNormal_00000011(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	local num2 = player:getBuffData(0x04, os.time());
	if num2 ~= 0 then
		num2 = num2 - os.time();
	end
	num2 = num2 + 1800 * num;
	if num2 > 18000 then
		num2 = 18000;
	end
	package:DelItemSendMsg(11, player);
	player:setBuffData(0x04, os.time() + num2, true);
	return num;
end

function ItemNormal_00000055(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  player:setBuffData(6, 0, true)
  player:setBuffData(10, 0, true)
  player:setBuffData(11, 0, true)
  if ItemNormal_AddBuff(player, 5, 3600, num, 356400) then
  	package:DelItemSendMsg(55, player);
	return num;
  else
	return false;
  end
end

function ItemNormal_00000056(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  player:setBuffData(5, 0, true)
  player:setBuffData(10, 0, true)
  player:setBuffData(11, 0, true)
  if ItemNormal_AddBuff(player, 6, 3600, num, 356400) then
  	package:DelItemSendMsg(56, player);
	return num;
  else
	return false;
  end
end

function ItemNormal_00000057(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  if ItemNormal_AddBuff(player, 4, 3600, num, 356400) then
  	package:DelItemSendMsg(57, player);
	return num;
  else
	return false;
  end
end

function ItemNormal_00000058(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  if ItemNormal_AddBuff(player, 4, 3600, num, 356400) then
  	package:DelItemSendMsg(58, player);
	return num;
  else
	return false;
  end
end

function ItemNormal_00000012(iid, num, bind, param)
    local player = GetPlayer()
	local fgt = player:findFighter(param);
    local mainFgt = player:getMainFighter();
    local package = player:GetPackage();
    if fgt == nil or fgt == mainFgt then
		return false;
	end
    local oldexp = fgt:getExp();
	fgt:addExp(5000*num);
    if fgt:getExp() > oldexp then
  	    package:DelItemSendMsg(12, player);
	    return num;
    else
	    return false;
    end
end

function ItemNormal_00000013(iid, num, bind, param)
    local player = GetPlayer()
	local fgt = player:findFighter(param);
    local mainFgt = player:getMainFighter();
    local package = player:GetPackage();
	if fgt == nil or fgt == mainFgt then
		return false;
	end
  local oldexp = fgt:getExp();
  fgt:addExp(500000*num);
  if fgt:getExp() > oldexp then
  	package:DelItemSendMsg(13, player);
	return num;
  else
	return false;
  end
end

function ItemNormal_00000014(iid, num, bind, param)
    local player = GetPlayer()
	local fgt = player:findFighter(param);
    local mainFgt = player:getMainFighter();
    local package = player:GetPackage();
	if fgt == nil or fgt == mainFgt then
		return false;
	end
  local oldexp = fgt:getExp();
	fgt:addExp(50000000*num);
  if fgt:getExp() > oldexp then
  	package:DelItemSendMsg(14, player);
	return num;
  else
	return false;
  end
end

function ItemNormal_00008938(iid, num, bind, param)
    local player = GetPlayer()
    local package = player:GetPackage();
	package:DelItemSendMsg(8938, player);
	player:getCoin(num * 10000);
	return num;
end

function ItemNormal_00008939(iid, num, bind, param)
    local player = GetPlayer()
    local package = player:GetPackage();
	package:DelItemSendMsg(8939, player);
	player:getCoin(num * 50000);
	return num;
end

function ItemNormal_00008940(iid, num, bind, param)
    local player = GetPlayer()
    local package = player:GetPackage();
	package:DelItemSendMsg(8940, player);
	player:getCoin(num * 100000);
	return num;
end

function ItemNormal_00000017(iid, num, bind, param)  
	local player = GetPlayer();
	local package = player:GetPackage();
	local reqGrids = 9;

	if reqGrids <= 	package:GetRestPackageSize() then
    	package:DelItemSendMsg(17, player);
		package:AddEquip(2000, 1);
		package:AddEquip(2001, 1);
		package:AddEquip(2002, 1);
		package:AddEquip(2003, 1);
		package:AddEquip(2004, 1);
		package:AddEquip(2005, 1);
		package:AddEquip(2006, 1);
		package:AddEquip(2007, 1);
		package:AddItem(18, 1, 1, 0, 2);
		player:getCoupon(30);
		return num;
	end
	player:sendMsgCode(2, 1011, 0);
	return false;
end

function ItemNormal_00000018(iid, num, bind, param)
	local player = GetPlayer();
	if player:GetLev() >= 10 then
       local package = player:GetPackage();
	   local reqGrids = 10;
	   if reqGrids <= 	package:GetRestPackageSize() then
           package:DelItemSendMsg(18, player);
		   package:AddEquip(2192, 1);
		   package:AddEquip(2193, 1);
		   package:AddEquip(2194, 1);
		   package:AddEquip(2195, 1);
		   package:AddEquip(2196, 1);
		   package:AddEquip(2197, 1);
		   package:AddEquip(2198, 1);
		   package:AddEquip(2199, 1);
		   package:AddItem(9, 1, 1, 0, 2);
		   package:AddItem(19, 1, 1, 0, 2);
	  	   player:getCoupon(30);
		   return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	player:sendMsgCode(2, 1010, 0);
	return false;
end


function ItemNormal_00000019(iid, num, bind, param)
	local player = GetPlayer();
	if player:GetLev() >= 20 then
	   local package = player:GetPackage();
  	   local reqGrids = 11;
	   if reqGrids <= 	package:GetRestPackageSize() then
		   package:DelItemSendMsg(19, player);
		   package:AddEquip(2200, 1);
		   package:AddEquip(2201, 1);
		   package:AddEquip(2202, 1);
		   package:AddEquip(2203, 1);
		   package:AddEquip(2204, 1);
		   package:AddEquip(2205, 1);
		   package:AddEquip(2206, 1);
		   package:AddEquip(2207, 1);
		   package:AddItem(9, 1, 1, 0, 2);
		   package:AddItem(1211, 1, 1, 0, 2);
		   package:AddItem(20, 1, 1, 0, 2);
		   player:getCoupon(40);
		   return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	player:sendMsgCode(2, 1010, 0);
	return false;
end

function ItemNormal_00000020(iid, num, bind, param)
	local player = GetPlayer();
	if player:GetLev() >= 30 then
	   local package = player:GetPackage();
	   local reqGrids = 13;
	   if reqGrids <= package:GetRestPackageSize() then
	       package:DelItemSendMsg(20, player);
           local fgt = player:getMainFighter();
           if fgt == nil then
               return false
           end

           local cls = fgt:getClass()
           if cls == 1 then
               package:AddEquip(2224, 1);
               package:AddEquip(2225, 1);
               package:AddEquip(2226, 1);
               package:AddEquip(2227, 1);
               package:AddEquip(2228, 1);
               package:AddEquip(2229, 1);
               package:AddEquip(2230, 1);
               package:AddEquip(2231, 1);
               package:AddEquip(1600, 1);
               package:AddItem(1201, 1, 1, 0, 2);
           elseif cls == 2 then
               package:AddEquip(2216, 1);
               package:AddEquip(2217, 1);
               package:AddEquip(2218, 1);
               package:AddEquip(2219, 1);
               package:AddEquip(2220, 1);
               package:AddEquip(2221, 1);
               package:AddEquip(2222, 1);
               package:AddEquip(2223, 1);
               package:AddEquip(1601, 1);
               package:AddItem(1205, 1, 1, 0, 2);
           elseif cls == 3 then
               package:AddEquip(2208, 1);
               package:AddEquip(2209, 1);
               package:AddEquip(2210, 1);
               package:AddEquip(2211, 1);
               package:AddEquip(2212, 1);
               package:AddEquip(2213, 1);
               package:AddEquip(2214, 1);
               package:AddEquip(2215, 1);
               package:AddEquip(1602, 1);
               package:AddItem(1208, 1, 1, 0, 2);
           end

		   package:AddItem(9, 1, 1, 0, 2);
		   package:AddItem(55, 1, 1, 0, 2);
		   package:AddItem(57, 1, 1, 0, 2);
		   package:AddItem(21, 1, 1, 0, 2);
		   player:getCoupon(40);
		   return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	player:sendMsgCode(2, 1010, 0);
	return false;
end


function ItemNormal_00000021(iid, num, bind, param)
	local player = GetPlayer();
	if player:GetLev() >= 40 then
	   local package = player:GetPackage();
	   local reqGrids = 21;
	   if reqGrids <= 	package:GetRestPackageSize() then
	       package:DelItemSendMsg(20, player);
           local fgt = player:getMainFighter();
           if fgt == nil then
               return false
           end

           local cls = fgt:getClass()
           if cls == 1 then
               package:AddEquip(2248, 1);
               package:AddEquip(2249, 1);
               package:AddEquip(2250, 1);
               package:AddEquip(2251, 1);
               package:AddEquip(2252, 1);
               package:AddEquip(2253, 1);
               package:AddEquip(2254, 1);
               package:AddEquip(2255, 1);
           elseif cls == 2 then
               package:AddEquip(2240, 1);
               package:AddEquip(2241, 1);
               package:AddEquip(2242, 1);
               package:AddEquip(2243, 1);
               package:AddEquip(2244, 1);
               package:AddEquip(2245, 1);
               package:AddEquip(2246, 1);
               package:AddEquip(2247, 1);
           elseif cls == 3 then
               package:AddEquip(2232, 1);
               package:AddEquip(2233, 1);
               package:AddEquip(2234, 1);
               package:AddEquip(2235, 1);
               package:AddEquip(2236, 1);
               package:AddEquip(2237, 1);
               package:AddEquip(2238, 1);
               package:AddEquip(2239, 1);
           end
		   package:AddItem(9, 1, 1, 0, 2);
		   package:AddItem(507, 1, 1, 0, 2);
		   package:AddItem(509, 1, 1, 0, 2);
		   package:AddItem(510, 1, 1, 0, 2);
		   package:AddItem(500, 1, 1, 0, 2);
		   package:AddItem(56, 1, 1, 0, 2);
		   package:AddItem(57, 1, 1, 0, 2);
		   package:AddItem(48, 1, 1, 0, 2);
		   package:AddItem(51, 1, 1, 0, 2);
		   package:AddItem(502, 1, 1, 0, 2);
		   package:AddItem(504, 1, 1, 0, 2);
		   package:AddItem(1212, 1, 1, 0, 2);
		   package:AddItem(5031, 1, 1, 0, 2);
		   player:getCoupon(40);
		   return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	player:sendMsgCode(2, 1010, 0);
	return false;
end

function ItemNormal_00000029(iid, num, bind, param)
	local player = GetPlayer();
    local package = player:GetPackage();
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
    if fgt:isPExpFull() then
        player:sendMsgCode(2, 1069, 0);
        return false
    end

    local n = 0;
    for i = 1, num do
        fgt:addPExp(100);
        n = n + 1
        if fgt:isPExpFull() then
            player:sendMsgCode(2, 1069, 0);
            break
        end
    end

    package:DelItemSendMsg(29, player);
    return n;
end

function ItemNormal_00000030(iid, num, bind, param)
	local player = GetPlayer();
    local package = player:GetPackage();
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
    if fgt:isPExpFull() then
        player:sendMsgCode(2, 1069, 0);
        return false
    end

    local n = 0
    for i = 1, num do
        fgt:addPExp(10000);
        n = n + 1
        if fgt:isPExpFull() then
            player:sendMsgCode(2, 1069, 0);
            break
        end
    end

    package:DelItemSendMsg(30, player);
    return n;
end

function ItemNormal_00000031(iid, num, bind, param)
	local player = GetPlayer();
    local package = player:GetPackage();
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end

    if fgt:isPExpFull() then
        player:sendMsgCode(2, 1069, 0);
        return false
    end

    local n = 0;
    for i = 1, num do
        fgt:addPExp(1000000);
        n = n + 1
        if fgt:isPExpFull() then
            player:sendMsgCode(2, 1069, 0);
            break
        end
    end

    package:DelItemSendMsg(31, player);
    return n;
end

function ItemNormal_00000035(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  package:DelItemSendMsg(35, player);
  player:getTael(100*num)  
  return num;
end

function ItemNormal_00000036(iid, num, bind, param)
	local player = GetPlayer();
    local package = player:GetPackage();

    if package:GetRestPackageSize() < 8 then     
        player:sendMsgCode(2, 1011, 0);
        return false;
    end  

    local viplvl = player:getVipLevel()
    if viplvl == 0 then
        player:sendMsgCode(2, 1008, 0)
        return false
    end

    local cls = player:GetClass()
    if cls == 1 then
        package:AddEquip(2544 , 1);
        package:AddEquip(2545 , 1);
        package:AddEquip(2546 , 1);
        package:AddEquip(2547 , 1);
        package:AddEquip(2548 , 1);
        package:AddEquip(2549 , 1);
        package:AddEquip(2550 , 1);
        package:AddEquip(2551 , 1);
    end

    if cls == 2 then
        package:AddEquip(2552 , 1);
        package:AddEquip(2553 , 1);
        package:AddEquip(2554 , 1);
        package:AddEquip(2555 , 1);
        package:AddEquip(2556 , 1);
        package:AddEquip(2557 , 1);
        package:AddEquip(2558 , 1);
        package:AddEquip(2559 , 1);
    end

    if cls == 3 then
        package:AddEquip(2560, 1);
        package:AddEquip(2561, 1);
        package:AddEquip(2562, 1);
        package:AddEquip(2563, 1);
        package:AddEquip(2564, 1);
        package:AddEquip(2565, 1);
        package:AddEquip(2566, 1);
        package:AddEquip(2567, 1);
    end

    package:DelItemSendMsg(36, player);
    return num;
end

function ItemNormal_00000037(iid, num, bind, param)
	local player = GetPlayer();
    local package = player:GetPackage();

    if package:GetRestPackageSize() < 8 then     
        player:sendMsgCode(2, 1011, 0);
        return false;
    end  

    local cls = player:GetClass()
    if cls == 1 then
        player:openLevelBox(30, cls)
    end

    if cls == 2 then
        player:openLevelBox(30, cls)
    end

    if cls == 3 then
        player:openLevelBox(30, cls)
    end

    package:DelItemSendMsg(37, player);
    return num;
end

function ItemNormal_00000043(iid, num, bind, param)
	local player = GetPlayer();
    local package = player:GetPackage();
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
    if num > 1 then
		player:sendMsgCode(2, 1058, 0);
        return false
    end
    local num2 = fgt:getBuffData(4)
    if num2 > 0 then
		player:sendMsgCode(2, 1058, 0);
        return false;
    end

--    local cnt = fgt:getAcupointCnt()
--    if cnt == 0 then
--        cnt = 1
--    end
    fgt:addPExp(20000);

    local now = os.time();
    local h = os.date("%H", os.time())
    local m = os.date("%M", os.time())
    local s = os.date("%S", os.time())
	if ItemNormal_AddBuff(fgt, 4, 24*60*60-(h*60*60+m*60+s), num, 86400) then
		package:DelItemSendMsg(43, player);
		return num;
	end
    return num;
end

function ItemNormal_00000052(iid, num, bind, param)
	local player = GetPlayer();
    local package = player:GetPackage();
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
    if num > 1 then
		player:sendMsgCode(2, 1058, 0);
        return false
    end
    local num2 = fgt:getBuffData(4)
    if num2 > 0 then
		player:sendMsgCode(2, 1058, 0);
        return false;
    end

--    local cnt = fgt:getAcupointCnt()
--       if cnt == 0 then
--           cnt = 1
--    end
    fgt:addPExp(2000);
    local now = os.time();
    local h = os.date("%H", os.time())
    local m = os.date("%M", os.time())
    local s = os.date("%S", os.time())
	if ItemNormal_AddBuff(fgt, 4, 24*60*60-(h*60*60+m*60+s), num, 86400) then
		package:DelItemSendMsg(52, player);
		return num;
	end
    return num;
end

function ItemNormal_00000053(iid, num, bind, param)
	local player = GetPlayer();
    local package = player:GetPackage();
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
    if num > 1 then
		player:sendMsgCode(2, 1058, 0);
        return false
    end
    local num2 = fgt:getBuffData(4)
    if num2 > 0 then
		player:sendMsgCode(2, 1058, 0);
        return false;
    end

--    local cnt = fgt:getAcupointCnt()
--    if cnt == 0 then
--        cnt = 1
--    end
    fgt:addPExp(10000);
    local now = os.time();
    local h = os.date("%H", os.time())
    local m = os.date("%M", os.time())
    local s = os.date("%S", os.time())
	if ItemNormal_AddBuff(fgt, 4, 24*60*60-(h*60*60+m*60+s), num, 86400) then
		package:DelItemSendMsg(53, player);
		return num;
	end
    return num;
end

function ItemNormal_00000066(iid, num, bind, param)
	local player = GetPlayer();
    local package = player:GetPackage();
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
    if num > 1 then
		player:sendMsgCode(2, 1058, 0);
        return false
    end
    local num2 = fgt:getBuffData(4)
    if num2 > 0 then
		player:sendMsgCode(2, 1058, 0);
        return false;
    end

--    local cnt = fgt:getAcupointCnt()
--    if cnt == 0 then
--        cnt = 1
--    end
    fgt:addPExp(5000);
    local now = os.time();
    local h = os.date("%H", os.time())
    local m = os.date("%M", os.time())
    local s = os.date("%S", os.time())
	if ItemNormal_AddBuff(fgt, 4, 24*60*60-(h*60*60+m*60+s), num, 86400) then
		package:DelItemSendMsg(66, player);
		return num;
	end
    return num;
end

function ItemNormal_00000069(id, num, bind, param)
    
    local player = GetPlayer();

	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
    
    local oldexp = fgt:getExp();
	fgt:addExp(1000 * num);
    if fgt:getExp() == oldexp then
        return false;
    end
  	    
    local package = player:GetPackage();
    package:DelItemSendMsg(69, player);

    if getSingleDay() then
        player:AddVar(1, num);
    end

    return num;
end

function ItemNormal_00008947(iid, num, bind, param)
	local player = GetPlayer();
	if player:GetLev() >= 50 then 
	   local package = player:GetPackage();
	   local reqGrids = 14;
	   reqGrids = reqGrids + package:GetItemUsedGrids(14, 1, 1);
	   reqGrids = reqGrids + package:GetItemUsedGrids(8923, 2, 1);
	   reqGrids = reqGrids + package:GetItemUsedGrids(9, 5, 1);	
	   reqGrids = reqGrids + package:GetItemUsedGrids(8916, 1, 1);	
	   reqGrids = reqGrids + package:GetItemUsedGrids(8927, 2, 1);
	   reqGrids = reqGrids + package:GetItemUsedGrids(8926, 1, 1);
	   if reqGrids <= 	package:GetRestPackageSize() then
	       package:DelItemSendMsg(8947, player);
	 	   package:AddEquip(441, 1);
		   package:AddEquip(442, 1);
		   package:AddEquip(443, 1);
		   package:AddEquip(444, 1);
		   package:AddEquip(445, 1);
		   package:AddEquip(446, 1);
		   package:AddEquip(447, 1);
		   package:AddEquip(448, 1);
		   package:AddEquip(449, 1);
		   package:AddEquip(450, 1);
		   package:AddEquip(451, 1);
		   package:AddEquip(452, 1);
		   package:AddEquip(453, 1);
		   package:AddEquip(454, 1);
		   package:AddItem(14, 1, 1, 0, 2);
		   package:AddItem(8923, 2, 1, 0, 2);
		   package:AddItem(9, 5, 1, 0, 2);	
		   package:AddItem(8916, 1, 1, 0, 2);
		   package:AddItem(8927, 2, 1, 0, 2);
		   package:AddItem(8926, 1, 1, 0, 2);	
		   player:getCoupon(50);
		   return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	player:sendMsgCode(2, 1010, 0);
	return false;
end


function ItemNormal_00008949(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	local randGem = Gem_Level_1[math.random(1, table.getn(Gem_Level_1))];
	local reqGrids = package:GetItemUsedGrids(randGem, 1, 1) + package:GetItemUsedGrids(12, 1, 1);
	if reqGrids <= 	package:GetRestPackageSize() then
	    package:DelItemSendMsg(8949, player);
		package:AddItem(randGem, 1, 1);
		package:AddItem(12, 1, 1);
		return num;
	end
	player:sendMsgCode(2, 1011, 0);
	return false;
end

function ItemNormal_00008950(iid, num, bind, param)
    local player = GetPlayer();
	local package = player:GetPackage();
	local gemSize = table.getn(Gem_Level_1);
	local randGem1 = Gem_Level_1[math.random(1, gemSize)];
	local randGem2 = Gem_Level_1[math.random(1, gemSize)];
	local randEquip = 0;
	local randEquipPos = math.random(1, 28);
	if randEquipPos <= 14 then
		randEquip = Green_Equip_Level_20[randEquipPos];
	else
		randEquip = Green_Equip_Level_30[randEquipPos-14];
	end
	local reqGrids = package:GetItemUsedGrids(randGem1, 1, 1);
    reqGrids = reqGrids + package:GetItemUsedGrids(randGem2, 1, 1);
    reqGrids = reqGrids + 1;
    reqGrids = reqGrids + package:GetItemUsedGrids(12, 3, 1);
	if reqGrids <= 	package:GetRestPackageSize() then
		package:DelItemSendMsg(8950, player);
	    package:AddEquip(randEquip, 1);
		package:AddItem(randGem1, 1, 1, 0, 2);
		package:AddItem(randGem2, 1, 1, 0, 2);
		package:AddItem(12, 3, 1, 0, 2);
		return num;
	end
	player:sendMsgCode(2, 1011, 0);
	return false;
end

function ItemNormal_00008951(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	local gemSize = table.getn(Gem_Level_1);
	local randGem1 = Gem_Level_1[math.random(1, gemSize)];
	local randGem2 = Gem_Level_1[math.random(1, gemSize)];
	local randGem3 = Gem_Level_1[math.random(1, gemSize)];
	local randEquip1 = 0;
	local randEquip2 = 0;
	local randEquipPos1 = math.random(1, 28);
	local randEquipPos2 = math.random(1, 28);
	if randEquipPos1 <= 14 then 
              randEquip1 = Green_Equip_Level_20[randEquipPos1] 
        else 
              randEquip1 = Green_Equip_Level_20[randEquipPos1-14] 
        end
	if randEquipPos2 <= 14 then 
              randEquip2 = Green_Equip_Level_30[randEquipPos2] 
        else 
              randEquip2 = Green_Equip_Level_30[randEquipPos2-14] 
        end
	local reqGrids = package:GetItemUsedGrids(randGem1, 1, 1);
	reqGrids = reqGrids + package:GetItemUsedGrids(randGem2, 1, 1);
	reqGrids = reqGrids + package:GetItemUsedGrids(randGem3, 1, 1);
	reqGrids = reqGrids + 2;
    reqGrids = reqGrids + package:GetItemUsedGrids(12, 4, 1);
	if reqGrids <= 	package:GetRestPackageSize() then
		package:DelItemSendMsg(8951, player);
     	package:AddEquip(randEquip1, 1);
		package:AddEquip(randEquip2, 1);
		package:AddItem(randGem1, 1, 1, 0, 2);
		package:AddItem(randGem2, 1, 1, 0, 2);
		package:AddItem(randGem3, 1, 1, 0, 2);
		package:AddItem(12, 4, 1, 0, 2);
		return num;
	end
	player:sendMsgCode(2, 1011, 0);
	return false;
end


function ItemNormal_00008952(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	local gemSize = table.getn(Gem_Level_1);
	local randGem1 = Gem_Level_1[math.random(1, gemSize)];
	local randGem2 = Gem_Level_1[math.random(1, gemSize)];
    local randGem3 = Gem_Level_1[math.random(1, gemSize)];
    local randGem4 = Gem_Level_1[math.random(1, gemSize)];
	local randEquip = 0;
	local randEquipPos = math.random(1, 28);
	if randEquipPos <= 14 then
		randEquip = Blue_Equip_Level_20[randEquipPos];
	else
		randEquip = Blue_Equip_Level_30[randEquipPos-14];
	end
	local reqGrids = package:GetItemUsedGrids(randGem1, 1, 1);
    reqGrids = reqGrids + package:GetItemUsedGrids(randGem2, 1, 1);
    reqGrids = reqGrids + package:GetItemUsedGrids(randGem3, 1, 1);
    reqGrids = reqGrids + package:GetItemUsedGrids(randGem4, 1, 1);
    reqGrids = reqGrids + 1;
    reqGrids = reqGrids + package:GetItemUsedGrids(12, 5, 1);
	if reqGrids <= 	package:GetRestPackageSize() then
		package:DelItemSendMsg(8952, player);
    	package:AddEquip(randEquip, 1);
		package:AddItem(randGem1, 1, 1, 0, 2);
		package:AddItem(randGem2, 1, 1, 0, 2);
        package:AddItem(randGem3, 1, 1, 0, 2);
        package:AddItem(randGem4, 1, 1, 0, 2);
		package:AddItem(12, 5, 1, 0, 2);
		return num;
	end
	player:sendMsgCode(2, 1011, 0);
	return false;
end



function ItemNormal_00008953(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_1);
	local randGem = Gem_Level_1[math.random(1, gemSize)];
	
	local randAmount = 0;      
    local randEquip = 0;
	local randEquipPos1 = math.random(1, 14);
	local randEquipPos2 = math.random(1, 14);
	local randEquip1 = Green_Equip_Level_40[randEquipPos1];
	local randEquip2 = Green_Equip_Level_40[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	
	if  r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(12, 3, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8953, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(12, 3, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(12, 3, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8953, player);
			package:AddEquip(randEquip1, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(12, 3, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end



function ItemNormal_00008954(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_1);
	local randGem = Gem_Level_1[math.random(1, gemSize)];
	
	local randAmount = 0;      
    local randEquip = 0;
	local randEquipPos1 = math.random(1, 14);
	local randEquipPos2 = math.random(1, 14);
	local randEquip1 = Green_Equip_Level_50[randEquipPos1];
	local randEquip2 = Green_Equip_Level_50[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	
	if  r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(12, 4, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8954, player);
			package:AddEquip(randEquip1 ,1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(12, 4, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(12, 4, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8954, player);
			package:AddEquip(randEquip1, 1);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(12, 4, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008955(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_1);
	local randGem = Gem_Level_1[math.random(1, gemSize)];
	
	local randAmount = 0;      
    local randEquip = 0;
	local randEquipPos1 = math.random(1, 14);
	local randEquipPos2 = math.random(1, 14);
	local randEquip1 = Green_Equip_Level_60[randEquipPos1];
	local randEquip2 = Green_Equip_Level_60[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;

	if  r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(12, 5, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8955, player);
			package:AddEquip(randEquip1,1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(12, 5, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(12, 5, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8955, player);
			package:AddEquip(randEquip1, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(12, 5, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008956(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_1);
	local randGem = Gem_Level_1[math.random(1, gemSize)];
	
	local randAmount = 0;      
    local randEquip = 0;
	local randEquipPos1 = math.random(1, 14);
	local randEquipPos2 = math.random(1, 14);
	local randEquip1 = Green_Equip_Level_70[randEquipPos1];
	local randEquip2 = Green_Equip_Level_70[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 1, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8956, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 1, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 1, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8956, player);
			package:AddEquip(randEquip1, 1);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 1, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008957(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_1);
	local randGem = Gem_Level_1[math.random(1, gemSize)];
	
	local randAmount = 0;      
	local randEquipPos1= math.random(1, 14);
	local randEquipPos2 = math.random(1, 14);
	local randEquip1 = Green_Equip_Level_80[randEquipPos1];
	local randEquip2 = Green_Equip_Level_80[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 2, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8957, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 2, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 2, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8957, player);
			package:AddEquip(randEquip1, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 2, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008958(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	local randEquipPos1 = math.random(1, 14);
	local randEquipPos2 = math.random(1, 14);
	local randEquip1 = Blue_Equip_Level_40[randEquipPos1];
	local randEquip2 = Blue_Equip_Level_40[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 2, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8958, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 2, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 2, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8958, player);
			package:AddEquip(randEquip1, 1);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 2, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008959(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	local randEquipPos1 = math.random(1, 14);
	local randEquipPos2 = math.random(1, 14);
	local randEquip1 = Blue_Equip_Level_50[randEquipPos1];
	local randEquip2 = Blue_Equip_Level_50[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 2, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8959, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 2, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 2, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8959, player);
			package:AddEquip(randEquip1, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 2, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008960(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	local randEquipPos1 = math.random(1, 14);
	local randEquipPos2 = math.random(1, 14);
	local randEquip1 = Blue_Equip_Level_60[randEquipPos1];
	local randEquip2 = Blue_Equip_Level_60[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 3, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8960, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 3, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 3, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8960, player);
			package:AddEquip(randEquip1, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 3, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008961(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	local randEquipPos1 = math.random(1, 14);
	local randEquipPos2 = math.random(1, 14);
	local randEquip1 = Blue_Equip_Level_70[randEquipPos1];
	local randEquip2 = Blue_Equip_Level_70[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 4, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8961, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 4, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 4, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8961, player);
			package:AddEquip(randEquip1, 1);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 4, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008962(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	local randEquipPos1 = math.random(1, 14);
	local randEquipPos2 = math.random(1, 14);
	local randEquip1 = Blue_Equip_Level_80[randEquipPos1];
	local randEquip2 = Blue_Equip_Level_80[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 5, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8962, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 5, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 5, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8962, player);
			package:AddEquip(randEquip1, 1);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 5, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008963(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Purple_Equip_Level_40)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Purple_Equip_Level_40[randEquipPos1];
	local randEquip2 = Purple_Equip_Level_40[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 3, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8963, player);
			package:AddEquip(randEquip1, 1, 0, 2);-- for backstatge 2: equip from box
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 3, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 3, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8963, player);
			package:AddEquip(randEquip1, 1, 0, 2);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 3, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008964(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Purple_Equip_Level_50)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Purple_Equip_Level_50[randEquipPos1];
	local randEquip2 = Purple_Equip_Level_50[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;  
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 4, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8964, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 4, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 4, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8964, player);
			package:AddEquip(randEquip1, 1, 0, 2);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 4, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008965(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Purple_Equip_Level_60)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Purple_Equip_Level_60[randEquipPos1];
	local randEquip2 = Purple_Equip_Level_60[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 5, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8965, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 5, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 5, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8965, player);
			package:AddEquip(randEquip1, 1, 0, 2);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 5, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008966(iid, num, bind, param)
    local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      

	local equipSize = table.getn(Purple_Equip_Level_70)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Purple_Equip_Level_70[randEquipPos1];
	local randEquip2 = Purple_Equip_Level_70[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 6, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8966, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 6, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 6, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8966, player);
			package:AddEquip(randEquip1, 1, 0, 2);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 6, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008967(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Purple_Equip_Level_80)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Purple_Equip_Level_80[randEquipPos1];
	local randEquip2 = Purple_Equip_Level_80[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 7, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8967, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 7, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 7, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8967, player);
			package:AddEquip(randEquip1, 1, 0, 2);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 7, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end	
end


function ItemNormal_00008968(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
  local reqGrids = 3 + package:GetItemUsedGrids(14, 2, 1)
  if reqGrids > package:GetRestPackageSize() then
		player:sendMsgCode(2, 1011, 0);
		return false;
  end
 
  local randGem = Gem_Level_3[math.random(1, #Gem_Level_3)];
  local randEquip = Orange_Equip_Level_50[math.random(1, #Orange_Equip_Level_50)];
  package:DelItemSendMsg(8968, player);
  package:AddEquip(randEquip, 1, 0, 2);			
  package:AddItem(randGem, 1, 1, 0, 2);
  package:AddItem(14, 2, 1, 0, 2);
  BroadCastEquip1(player:getCountry(), player:getPName(), "橙色任务经验宝箱", GetItemName(randEquip));

  return num;
end


function ItemNormal_00008969(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
  local reqGrids = 2 + package:GetItemUsedGrids(14, 3, 1)
  if reqGrids > package:GetRestPackageSize() then
		player:sendMsgCode(2, 1011, 0);
		return false;
  end
	 
  local randGem = Gem_Level_3[math.random(1, #Gem_Level_3)];
  local randEquip = Orange_Equip_Level_50[math.random(1, #Orange_Equip_Level_50)];
  package:DelItemSendMsg(8969, player);
  package:AddEquip(randEquip, 1, 0, 2);			
  package:AddItem(randGem, 1, 1, 0, 2);
  package:AddItem(14, 3, 1, 0, 2);
  BroadCastEquip1(player:getCountry(), player:getPName(), "橙色任务经验宝箱", GetItemName(randEquip));

  return num;
end


function ItemNormal_00008970(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
  local reqGrids = 2 + package:GetItemUsedGrids(14, 4, 1)
  if reqGrids > package:GetRestPackageSize() then
		player:sendMsgCode(2, 1011, 0);
		return false;
  end
		  
  local randGem = Gem_Level_3[math.random(1, #Gem_Level_3)];
  local randEquip = Orange_Equip_Level_50[math.random(1, #Orange_Equip_Level_50)];
  package:DelItemSendMsg(8970, player);
  package:AddEquip(randEquip, 1, 0, 2);			
  package:AddItem(randGem, 1, 1, 0, 2);
  package:AddItem(14, 4, 1, 0, 2);
  BroadCastEquip1(player:getCountry(), player:getPName(), "橙色任务经验宝箱", GetItemName(randEquip));

  return num;
end


function ItemNormal_00008971(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
  local reqGrids = 2 + package:GetItemUsedGrids(14, 5, 1)
  if reqGrids > package:GetRestPackageSize() then
		player:sendMsgCode(2, 1011, 0);
		return false;
  end
 
  local randGem = Gem_Level_3[math.random(1, #Gem_Level_3)];
  local randEquip = Orange_Equip_Level_70[math.random(1, #Orange_Equip_Level_70)];
  package:DelItemSendMsg(8971, player);
  package:AddEquip(randEquip, 1, 0, 2);			
  package:AddItem(randGem, 1, 1, 0, 2);
  package:AddItem(14, 5, 1, 0, 2);
  BroadCastEquip1(player:getCountry(), player:getPName(), "橙色任务经验宝箱", GetItemName(randEquip));

  return num;
end


function ItemNormal_00008972(iid, num, bind, param)
  local player = GetPlayer();
  local package = player:GetPackage();
	
  local reqGrids = 2 + package:GetItemUsedGrids(14, 6, 1)
  if reqGrids > package:GetRestPackageSize() then
		player:sendMsgCode(2, 1011, 0);
		return false;
  end
 
  local randGem = Gem_Level_3[math.random(1, #Gem_Level_3)];

  package:DelItemSendMsg(8972, player);  
  if math.random(1, 100) < 51 then
	local randEquip = Orange_Equip_Level_80[math.random(1, #Orange_Equip_Level_80)];
	package:AddEquip(randEquip, 1, 0, 2);	
	BroadCastEquip1(player:getCountry(), player:getPName(), "橙色任务经验宝箱", GetItemName(randEquip));
  else
	local randFavor = Orange_Favor[math.random(1, #Orange_Favor)];
	package:AddItem(randFavor, 2, 1, 0, 2);
	BroadCastEquip1(player:getCountry(), player:getPName(), "橙色任务经验宝箱", GetItemName(randFavor));
  end
  package:AddItem(randGem, 1, 1, 0, 2);
  package:AddItem(14, 6, 1, 0, 2);
 
  return num;
end


function ItemNormal_00008973(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_1);
	local randGem = Gem_Level_1[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Green_Equip_Level_40)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Green_Equip_Level_40[randEquipPos1];
	local randEquip2 = Green_Equip_Level_40[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8938, 3, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8973, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8938, 3, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8938, 3, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8973, player);
			package:AddEquip(randEquip1, 1);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8938, 3, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008974(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_1);
	local randGem = Gem_Level_1[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Green_Equip_Level_50)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Green_Equip_Level_50[randEquipPos1];
	local randEquip2 = Green_Equip_Level_50[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8938, 4, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8974, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8938, 4, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8938, 4, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8974, player);
			package:AddEquip(randEquip1, 1);		
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8938, 4, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008975(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_1);
	local randGem = Gem_Level_1[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Green_Equip_Level_60)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Green_Equip_Level_60[randEquipPos1];
	local randEquip2 = Green_Equip_Level_60[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8938, 5, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8975, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8938, 5, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1
        reqGrids = reqGrids + package:GetItemUsedGrids(8938, 5, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8975, player);
			package:AddEquip(randEquip1, 1);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8938, 5, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008976(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_1);
	local randGem = Gem_Level_1[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Green_Equip_Level_70)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Green_Equip_Level_70[randEquipPos1];
	local randEquip2 = Green_Equip_Level_70[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 1, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8976, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 1, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;  
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 1, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8976, player);
			package:AddEquip(randEquip1, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 1, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008977(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_1);
	local randGem = Gem_Level_1[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Green_Equip_Level_80)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Green_Equip_Level_80[randEquipPos1];
	local randEquip2 = Green_Equip_Level_80[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 2, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8977, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 2, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 2, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8977, player);
			package:AddEquip(randEquip1, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 2, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008978(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Blue_Equip_Level_40)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Blue_Equip_Level_40[randEquipPos1];
	local randEquip2 = Blue_Equip_Level_40[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 2, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8978, player);
			package:AddEquip(randEquip1,1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 2, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 2, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8978, player);
			package:AddEquip(randEquip1, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 2, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end

function ItemNormal_00008979(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Blue_Equip_Level_50)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Blue_Equip_Level_50[randEquipPos1];
	local randEquip2 = Blue_Equip_Level_50[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 2, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8979, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 2, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 2, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8979, player);
			package:AddEquip(randEquip1, 1);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 2, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008980(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Blue_Equip_Level_60)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Blue_Equip_Level_60[randEquipPos1];
	local randEquip2 = Blue_Equip_Level_60[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 3, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8980, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 3, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 3, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8980, player);
			package:AddEquip(randEquip1, 1);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 3, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008981(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Blue_Equip_Level_70)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Blue_Equip_Level_70[randEquipPos1];
	local randEquip2 = Blue_Equip_Level_70[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 4, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8981, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 4, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 4, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8981, player);
			package:AddEquip(randEquip1, 1);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 4, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end

function ItemNormal_00008982(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Blue_Equip_Level_80)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Blue_Equip_Level_80[randEquipPos1];
	local randEquip2 = Blue_Equip_Level_80[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;  
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 5, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8982, player);
			package:AddEquip(randEquip1, 1);
			package:AddEquip(randEquip2, 1);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 5, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 5, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8982, player);
			package:AddEquip(randEquip1, 1);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 5, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end

function ItemNormal_00008983(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Purple_Equip_Level_40)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Purple_Equip_Level_40[randEquipPos1];
	local randEquip2 = Purple_Equip_Level_40[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;  
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 3, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8983, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 3, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 3, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8983, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 3, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end

function ItemNormal_00008984(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Purple_Equip_Level_50)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Purple_Equip_Level_50[randEquipPos1];
	local randEquip2 = Purple_Equip_Level_50[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 4, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8984, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 4, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 4, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8984, player);
			package:AddEquip(randEquip1, 1, 0, 2);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 4, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008985(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Purple_Equip_Level_60)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Purple_Equip_Level_60[randEquipPos1];
	local randEquip2 = Purple_Equip_Level_60[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;  
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 5, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8985, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 5, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 5, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8985, player);
			package:AddEquip(randEquip1, 1, 0, 2);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 5, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end

function ItemNormal_00008986(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Purple_Equip_Level_70)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Purple_Equip_Level_70[randEquipPos1];
	local randEquip2 = Purple_Equip_Level_70[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 6, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8986, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 6, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 6, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8986, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 6, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008987(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Purple_Equip_Level_80)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Purple_Equip_Level_80[randEquipPos1];
	local randEquip2 = Purple_Equip_Level_80[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 7, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8987, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 7, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8939, 7, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8987, player);
			package:AddEquip(randEquip1, 1, 0, 2);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8939, 7, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end

function ItemNormal_00008988(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_3);
	local randGem = Gem_Level_3[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Orange_Equip_Level_50)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Orange_Equip_Level_50[randEquipPos1];
	local randEquip2 = Orange_Equip_Level_50[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8940, 2, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8988, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8940, 2, 1, 0, 2);
			BroadCastEquip2(player:getCountry(), player:getPName(), "橙色铜钱宝箱", GetItemName(randEquip1), GetItemName(randEquip2));
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8940, 2, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8988, player);
			package:AddEquip(randEquip1, 1, 0, 2);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8940, 2, 1, 0, 2);
			BroadCastEquip1(player:getCountry(), player:getPName(), "橙色铜钱宝箱", GetItemName(randEquip1));
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end

function ItemNormal_00008989(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_3);
	local randGem = Gem_Level_3[math.random(1, gemSize)];
	
	local randAmount = 0;      
    local randEquip = 0;
	
	local equipSize = table.getn(Orange_Equip_Level_50)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Orange_Equip_Level_50[randEquipPos1];
	local randEquip2 = Orange_Equip_Level_50[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
  		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8940, 3, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8989, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8940, 3, 1, 0, 2);
			BroadCastEquip2(player:getCountry(), player:getPName(), "橙色铜钱宝箱", GetItemName(randEquip1), GetItemName(randEquip2));
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8940, 3, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8989, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8940, 3, 1, 0, 2);
			BroadCastEquip1(player:getCountry(), player:getPName(), "橙色铜钱宝箱", GetItemName(randEquip1));
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end

function ItemNormal_00008990(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_3);
	local randGem = Gem_Level_3[math.random(1, gemSize)];
	
	local randAmount = 0;      
    local randEquip = 0;
	
	local equipSize = table.getn(Orange_Equip_Level_50)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Orange_Equip_Level_50[randEquipPos1];
	local randEquip2 = Orange_Equip_Level_50[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8940, 4, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8990, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8940, 4, 1, 0, 2);
			BroadCastEquip2(player:getCountry(), player:getPName(), "橙色铜钱宝箱", GetItemName(randEquip1), GetItemName(randEquip2));
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8940, 4, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8990, player);
			package:AddEquip(randEquip1, 1, 0, 2);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8940, 4, 1, 0, 2);
			BroadCastEquip1(player:getCountry(), player:getPName(), "橙色铜钱宝箱", GetItemName(randEquip1));
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end

function ItemNormal_00008991(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_3);
	local randGem = Gem_Level_3[math.random(1, gemSize)];
	
	local randAmount = 0;      
    local randEquip = 0;
	
	local equipSize = table.getn(Orange_Equip_Level_70)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Orange_Equip_Level_70[randEquipPos1];
	local randEquip2 = Orange_Equip_Level_70[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8940, 5, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8991, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8940, 5, 1, 0, 2);
			BroadCastEquip2(player:getCountry(), player:getPName(), "橙色铜钱宝箱", GetItemName(randEquip1), GetItemName(randEquip2));
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8940, 5, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8991, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8940, 5, 1, 0, 2);
			BroadCastEquip1(player:getCountry(), player:getPName(), "橙色铜钱宝箱", GetItemName(randEquip1));
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	
end


function ItemNormal_00008992(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_3);
	local randGem = Gem_Level_3[math.random(1, gemSize)];
	
	local randAmount = 0;      
    local randEquip = 0;
	
	local equipSize = table.getn(Orange_Equip_Level_70)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Orange_Equip_Level_70[randEquipPos1];
	local randEquip2 = Orange_Equip_Level_70[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2; 
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(8940, 6, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8992, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8940, 6, 1, 0, 2);
			BroadCastEquip2(player:getCountry(), player:getPName(), "橙色铜钱宝箱", GetItemName(randEquip1), GetItemName(randEquip2));
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(8940, 6, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8992, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(8940, 6, 1, 0, 2);
			BroadCastEquip1(player:getCountry(), player:getPName(), "橙色铜钱宝箱", GetItemName(randEquip1));
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end	
end


function ItemNormal_00008993(iid, num, bind, param)
	local player = GetPlayer();
	local level = player:GetLev();
	if level >= 40 then  
		local package = player:GetPackage();
		
		local Equip_Index1 = math.random(1, 28);-- orange equip level 50、70 size 28
		local Equip_Index2 = math.random(1, 28);
		local randEquip1 = 0;
		local randEquip2 = 0;
		
		if level < 70 then
			randEquip1 = Orange_Equip_Level_50[Equip_Index1];
			randEquip2 = Orange_Equip_Level_50[Equip_Index2];
		else
			randEquip1 = Orange_Equip_Level_70[Equip_Index1];
			randEquip2 = Orange_Equip_Level_70[Equip_Index2];
		end
		
		local reqGrids = 0;
		
		local R_8916 = math.random(1, 100);
		local R_0056= math.random(1, 100);
		local R_8923 = math.random(1, 100);
		local R_8920 = math.random(1, 100);
		local R_8929 = math.random(1, 100);
		local R_8903 = math.random(1, 100);
		local R_8902 = math.random(1, 100);
		local R_8941 = math.random(1, 100);
		local R_8940 = math.random(1, 100);
		local R_0009 = math.random(1, 100);
		local R_8919 = math.random(1, 100);
		local R_Equip = math.random(1, 100);
		
		
		if R_8916 <= 30 then		
			reqGrids = package:GetItemUsedGrids(8916, 1, 1);
		end
		if R_0056 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(56, 1, 1);	
		end
		if R_8923 <= 30 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8923, 2, 1);	
		end
		if R_8920 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8920, 1, 1);	
		end
		if R_8929 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8929, 1, 1);	
		end
		if R_8903 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8903, 1, 1);	
		end	
		if R_8902 <= 70 then		
			reqGrids = reqGrids + package:GetItemUsedGrids(8902, 2, 1);
		end
		if R_8941 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8941, 5, 1);	
		end
		if R_8940 <= 70 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8940, 1, 1);	
		end
		if R_0009 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(9, 1, 1);	
		end
		if R_8919 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8919, 1, 1);	
		end
		if R_Equip <= 10 then
			reqGrids = reqGrids + 2;	
		else
			reqGrids = reqGrids + 1;	
		end
		
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(8993, player);
			if R_8916 <= 30 then		
				package:AddItem(8916, 1, 1, 0, 2);
			end
			if R_0056 <= 30 then	
				package:AddItem(56, 1, 1, 0, 2);
			end
			if R_8923 <= 30 then			
				package:AddItem(8923, 2, 1, 0, 2);
			end
			if R_8920 <= 30 then	
				package:AddItem(8920, 1, 1, 0, 2);	
			end
			if R_8929 <= 30 then	
				package:AddItem(8929, 1, 1, 0, 2);	
			end
			if R_8903 <= 30 then	
				package:AddItem(8903, 1, 1, 0, 2);	
			end	
			if R_8902 <= 70 then		
				package:AddItem(8902, 2, 1, 0, 2);
			end
			if R_8941 <= 70 then	
				package:AddItem(8941, 5, 1, 0, 2);	
			end
			if R_8940 <= 70 then			
				package:AddItem(8940, 1, 1, 0, 2);	
			end
			if R_0009 <= 70 then	
				package:AddItem(9, 1, 1, 0, 2);	
			end
			if R_8919 <= 70 then	
				package:AddItem(8919, 1, 1, 0, 2);	
			end
			if R_Equip <= 10 then
				package:AddEquip(randEquip1, 1, 0, 2);	
				package:AddEquip(randEquip2, 1, 0, 2);
				BroadCastEquip2(player:getCountry(), player:getPName(), "帮派宝箱", GetItemName(randEquip1), GetItemName(randEquip2));
			else
				package:AddEquip(randEquip1, 1, 0, 2);
				BroadCastEquip1(player:getCountry(), player:getPName(), "帮派宝箱", GetItemName(randEquip1));
			end
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	
	end
	player:sendMsgCode(2, 1010, 0);
	return false;
	
end



function ItemNormal_00008994(iid, num, bind, param)
	local player = GetPlayer();
	local level = player:GetLev();
	if level >= 40 then 
		local package = player:GetPackage();
		local reqGrids = 0;

		local Equip_Index = math.random(1, 28);-- orange equip level 50、70 size 28
		local randEquip = 0;
		if level < 70 then
			randEquip = Orange_Equip_Level_50[Equip_Index];
		else
			randEquip = Orange_Equip_Level_70[Equip_Index];
		end
		
		local R_Equip = math.random(1, 100);
		local r1_0004 = math.random(1, 100);
		local r10007 = math.random(1, 100);
		local r1_0009 = math.random(1, 100);
		local r1_8915 = math.random(1, 100);
		local r2_0004 = math.random(1, 100);
		local r20007 = math.random(1, 100);
		local r2_0009 = math.random(1, 100);
		local r2_8915 = math.random(1, 100);
		
		if R_Equip <= 20 then
			reqGrids = reqGrids + 1;
	   	   
			if r1_0004 <=25 then
                reqGrids = reqGrids + package:GetItemUsedGrids(4, 1, 1);
		    elseif r10007 <=50 then
                reqGrids = reqGrids + package:GetItemUsedGrids(7, 1, 1);
     	    elseif r1_0009 <=75 then
                reqGrids = reqGrids + package:GetItemUsedGrids(9, 1, 1);
		    elseif r1_8915 <=100 then
                reqGrids = reqGrids + package:GetItemUsedGrids(8915, 1, 1);
			end
		    if r2_0004 <=25 then
                reqGrids = reqGrids + package:GetItemUsedGrids(4, 1, 1);
		    elseif r20007 <=50 then
                reqGrids = reqGrids + package:GetItemUsedGrids(7, 1, 1);
		    elseif r2_0009 <=75 then
                reqGrids = reqGrids + package:GetItemUsedGrids(9, 1, 1);
		    elseif r2_8915 <=100 then
                reqGrids = reqGrids + package:GetItemUsedGrids(8915, 1, 1);
            end	
		
			if reqGrids <= package:GetRestPackageSize() then
				package:DelItemSendMsg(8994, player);
				package:AddEquip(randEquip, 1, 0, 2);
				BroadCastEquip1(player:getCountry(), player:getPName(), "帮派战个人宝箱", GetItemName(randEquip));
				if r1_0004 <=25 then
                    package:AddItem(4, 1, 1, 0, 2);
		        elseif r10007 <=50 then
                    package:AddItem(7, 1, 1, 0, 2);
     	        elseif r1_0009 <=75 then
                    package:AddItem(9, 1, 1, 0, 2);
		        elseif r1_8915 <=100 then
                    package:AddItem(8915, 1, 1, 0, 2);
                end	
		        if r2_0004 <=25 then
                    package:AddItem(4, 1, 1, 0, 2);
				elseif r20007 <=50 then
					package:AddItem(7, 1, 1, 0, 2);
				elseif r2_0009 <=75 then
					package:AddItem(9, 1, 1, 0, 2);
				elseif r2_8915 <=100 then
					package:AddItem(8915, 1, 1, 0, 2);
				end	
				return num;				
			else
				player:sendMsgCode(2, 1011, 0);
				return false;
			end
		else
			if reqGrids <= package:GetRestPackageSize() then				
				package:DelItemSendMsg(8994, player);
				if r1_0004 <=25 then
                    package:AddItem(4, 1, 1, 0, 2);
		        elseif r10007 <=50 then
                    package:AddItem(7, 1, 1, 0, 2);
     	        elseif r1_0009 <=75 then
                    package:AddItem(9, 1, 1, 0, 2);
		        elseif r1_8915 <=100 then
                    package:AddItem(8915, 1, 1, 0, 2);
                end	
		        if r2_0004 <=25 then
                    package:AddItem(4, 1, 1, 0, 2);
				elseif r20007 <=50 then
					package:AddItem(7, 1, 1, 0, 2);
				elseif r2_0009 <=75 then
					package:AddItem(9, 1, 1, 0, 2);
				elseif r2_8915 <=100 then
					package:AddItem(8915, 1, 1, 0, 2);
				end	
				return num;			
			else	
				player:sendMsgCode(2, 1011, 0);			
				return false;
			end	
		end
	end
	player:sendMsgCode(2, 1010, 0);
	return false;
end




function ItemNormal_00008995(iid, num, bind, param)
  local player = GetPlayer()
    local package = player:GetPackage();
  if player:isMainFighter(param) then
    return false
  end
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
  local oldexp = fgt:getExp();
	fgt:addExp(50000*num);
  if fgt:getExp() > oldexp then
  	package:DelItemSendMsg(8995, player);
	return num;
  else
	return false;
  end
end



function ItemNormal_00000015(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  package:DelItemSendMsg(15, player);
  player:getTael(1000*num)  
  return num;
end


function ItemNormal_00008997(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	if package:GetRestPackageSize() > 0 then				
		package:DelItemSendMsg(8997, player);
		package:AddItem(56, 3, 1, 0, 2);
		player:getGold(100);
	else
		player:sendMsgCode(2, 1011, 0);			
		return false;
	end
	return num;
end

function ItemNormal_00008998(iid, num, bind, param)
--高级经验加速符56 x2，中级群体增强符6 x2，中级水晶8922x2，初级水晶8921x2，初级打孔符8917x2，潜力提升符8999x2
  local player = GetPlayer();
  local package = player:GetPackage();
  local reqGrids = 0;
  reqGrids = reqGrids + package:GetItemUsedGrids(56, 2, 1);
  reqGrids = reqGrids + package:GetItemUsedGrids(6, 2, 1);
--  reqGrids = reqGrids + package:GetItemUsedGrids(8922, 2, 1);
-- reqGrids = reqGrids + package:GetItemUsedGrids(8921, 2, 1);
--  reqGrids = reqGrids + package:GetItemUsedGrids(8917, 2, 1);
--  reqGrids = reqGrids + package:GetItemUsedGrids(8999, 2, 1);
  if reqGrids <= package:GetRestPackageSize() then
    package:DelItemSendMsg(8998, player);
    package:AddItem(56, 2, 1, 0, 2);
    package:AddItem(6, 2, 1, 0, 2);
--    package:AddItem(8922, 2, 1, 0, 2);
--    package:AddItem(8921, 2, 1, 0, 2);
--    package:AddItem(8917, 2, 1, 0, 2);
--    package:AddItem(8999, 2, 1, 0, 2);
    return num;
  end
  player:sendMsgCode(2, 1011, 0);
  return false;
end

function ItemNormal_00009002(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
    local reqGrids = 0;
    reqGrids = reqGrids + package:GetItemUsedGrids(56, 1, 1);
    reqGrids = reqGrids + package:GetItemUsedGrids(8922, 1, 1);
    reqGrids = reqGrids + package:GetItemUsedGrids(5003, 1, 1);
    reqGrids = reqGrids + package:GetItemUsedGrids(5013, 1, 1);
    if reqGrids <= package:GetRestPackageSize() then
 		package:DelItemSendMsg(9002, player);
        package:AddItem(56, 1, 1, 0, 2);
        package:AddItem(8922, 1, 1, 0, 2);
        package:AddItem(5003, 1, 1, 0, 2);
        package:AddItem(5013, 1, 1, 0, 2);
        return num;
    end
    player:sendMsgCode(2, 1011, 0);
    return false;
end

function ItemNormal_00009003(iid, num, bind, param)
  local player = GetPlayer()
  if player:hasFlag(9) then
    player:sendMsgCode(2, 1054, 0)
    return false;
  end
  local num2 = player:getBuffData(0)
  if num2 >= 100000 then
    return false
  end
  num2 = num2 + 10000 * num
  if num2 > 100000 then
    num2 = 100000
  end
  player:setBuffData(0, num2, true)
  player:autoRegenAll()
  local package = player:GetPackage();
  package:DelItemSendMsg(9003, player);
  return num
end

function openGemBox(id, boxid)
    local player = GetPlayer();
    local package = player:GetPackage();
    local reqGrids = 0;
    reqGrids = reqGrids + package:GetItemUsedGrids(8917, 2, 1);
    reqGrids = reqGrids + package:GetItemUsedGrids(8921, 2, 1);
    reqGrids = reqGrids + package:GetItemUsedGrids(8918, 1, 1);
    reqGrids = reqGrids + package:GetItemUsedGrids(id, 3, 1);
    if reqGrids <= package:GetRestPackageSize() then
		package:DelItemSendMsg(boxid, player);
		package:AddItem(8917, 2, 1, 0, 2);
        package:AddItem(8921, 2, 1, 0, 2);
        package:AddItem(8918, 1, 1, 0, 2);
        package:AddItem(id, 3, 1, 0, 2);
        return num;
    end
    player:sendMsgCode(2, 1011, 0);
    return false;
end

function ItemNormal_00009005(iid, num, bind, param)
  return openGemBox(5003, 9005)
end

function ItemNormal_00009006(iid, num, bind, param)
  return openGemBox(5033, 9006)
end

function ItemNormal_00009007(iid, num, bind, param)
  return openGemBox(5013, 9007)
end

function ItemNormal_00009008(iid, num, bind, param)
  return openGemBox(5023, 9008)
end

function ItemNormal_00009009(iid, num, bind, param)
  return openGemBox(5043, 9009)
end

function ItemNormal_00009010(iid, num, bind, param)
  return openGemBox(5123, 9010)
end

function ItemNormal_00009011(iid, num, bind, param)
  return openGemBox(5073, 9011)
end

function ItemNormal_00009012(iid, num, bind, param)
  return openGemBox(5093, 9012)
end

function ItemNormal_00009013(iid, num, bind, param)
  return openGemBox(5103, 9013)
end

function ItemNormal_00009014(iid, num, bind, param)
  return openGemBox(5113, 9014)
end

function ItemNormal_00009015(iid, num, bind, param)
  return openGemBox(5083, 9015)
end

function ItemNormal_00009016(iid, num, bind, param)
  local player = GetPlayer()
    local package = player:GetPackage();
  if player:isMainFighter(param) then
    return false
  end
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
  local oldexp = fgt:getExp();
	fgt:addExp(2000000*num);
  if fgt:getExp() > oldexp then
  	package:DelItemSendMsg(9016, player);
	return num;
  else
	return false;
  end
end

function ItemNormal_00009017(iid, num, bind, param)
  local player = GetPlayer()
    local package = player:GetPackage();
  if player:isMainFighter(param) then
    return false
  end
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
  local oldexp = fgt:getExp();
	fgt:addExp(80000000*num);
  if fgt:getExp() > oldexp then
  	package:DelItemSendMsg(9017, player);
	return num;
  else
	return false;
  end
end

function ItemNormal_00009031(iid, num, bind, param)
	if(num ~= 4) then
		return false;
	end
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 1 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	package:DelItemSendMsg(9031, player);
	equip = math.random(1, table.getn(Orange_Equip_Level_90));
	package:AddEquip(Orange_Equip_Level_90[equip], bind, 0, 5);--for backstatge 5 for equip from merge

	return num;
end


function ItemNormal_00009027(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
    local reqGrids = 0;
	local itemId = 0;
    reqGrids = package:GetItemUsedGrids(8938, 2, 1);
	local chance = math.random(1, 100);
	if chance <= 15 then
		local var1 = {5801,5802,5803,5804};
		itemId = var1[math.random(1, #var1)];
	elseif chance <= 40 then
		local var2 = {5001,5011,5021,5031,5041,5071,5081,5091,5101,5111,5121};
		itemId = var2[math.random(1, #var2)];
	else
		local var3 = {5805,5806,5807,5808,5809,5810,5811,5812};
		itemId = var3[math.random(1, #var3)];
	end
	reqGrids =  reqGrids + package:GetItemUsedGrids(itemId, 1, 1);
	if reqGrids > package:GetRestPackageSize() then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
        package:DelItemSendMsg(9027, player);
	package:AddItem(8938, 2, 1, 0, 2);
	package:AddItem(itemId, 1, 1, 0, 2);
        return num;
end

function ItemNormal_00009028(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
    local reqGrids = 0;
	local itemId = 0;
    reqGrids = package:GetItemUsedGrids(8939, 1, 1);
	local chance = math.random(1, 100);
	if chance <= 25 then
		local var1 = {5002,5012,5022,5032,5042,5072,5082,5092,5102,5112,5122};
		itemId = var1[math.random(1, #var1)];
	else
		local var2 = {5805,5806,5807,5808,5809,5810,5811,5812};
		itemId = var2[math.random(1, #var2)];
	end
	reqGrids =  reqGrids + package:GetItemUsedGrids(itemId, 1, 1);
	if reqGrids > package:GetRestPackageSize() then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
        package:DelItemSendMsg(9028, player);
	package:AddItem(8939, 1, 1, 0, 2);
	package:AddItem(itemId, 1, 1, 0, 2);
        return num;
end


function ItemNormal_00009029(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
    local reqGrids = 0;
	local itemId = 0;
    reqGrids = package:GetItemUsedGrids(8939, 2, 1);
	local chance = math.random(1, 100);
	if chance <= 25 then
		local var1 = {5002,5012,5022,5032,5042,5072,5082,5092,5102,5112,5122};
		itemId = var1[math.random(1, #var1)];
	else
		local var2 = {5813,5814,5815,5816,5817,5818,5819};
		itemId = var2[math.random(1, #var2)];
	end
	reqGrids =  reqGrids + package:GetItemUsedGrids(itemId, 1, 1);
	if reqGrids > package:GetRestPackageSize() then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
        package:DelItemSendMsg(9029, player);
	package:AddItem(8939, 2, 1, 0, 2);
	package:AddItem(itemId, 1, 1, 0, 2);
        return num;
end

function ItemNormal_00009030(iid, num, bind, param)
  local player = GetPlayer();
  local package = player:GetPackage();
  local reqGrids = 0;
	local itemId = 0;
  reqGrids = 1 + package:GetItemUsedGrids(8940, 2, 1);
	if reqGrids > package:GetRestPackageSize() then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	local chance = math.random(1, 100);
	if chance <= 2 then
		itemId = Orange_Favor[math.random(1, #Orange_Favor)];
	elseif  chance <= 47 then
		itemId = Purple_Favor[math.random(1, #Purple_Favor)];
	else
		itemId = Gem_Level_3[math.random(1, #Gem_Level_3)];
	end
  package:DelItemSendMsg(9030, player);
	package:AddItem(8940, 2, 1, 0, 2);
	package:AddItem(itemId, 1, 1, 0, 2);
  return num;
end

function ItemNormal_00009036(iid, num, bind, param)
  local player = GetPlayer();
  local package = player:GetPackage();
	if package:GetRestPackageSize() < 1 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
  local roll = math.random(1,100);
  if roll <= 5 then
    package:DelItemSendMsg(9036, player);
    player:getCoupon(10);
    return;
  end
  local itemId
  local itemCount = 1
  if roll <= 6 then
    itemId = 5005
  elseif roll <= 15 then
    itemId = 56
  elseif roll <= 25 then
    itemId = 8999
  elseif roll <= 36 then
    itemId = 8916
  elseif roll <= 48 then
    itemId = 7
  elseif roll <= 61 then
    itemId = 8941
    itemCount = 10
  elseif roll <= 74 then
    itemId = 8922
  elseif roll <= 87 then
    itemId = 9
  else
    itemId = 11 
  end

  package:DelItemSendMsg(9036, player);
  player:GetPackage():AddItem(itemId, itemCount, true);
  return num;
end

function ItemNormal_00009037(iid, num, bind, param)
  local player = GetPlayer();
  local package = player:GetPackage();
	if package:GetRestPackageSize() < 1 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
  local roll = math.random(1,100);
  local itemId
  local itemCount = 1
  local notify = false
  if roll <= 3 then
    itemId = 9000
    notify = true
  elseif roll <= 14 then
    itemId = Gem_Level_1[math.random(1, #Gem_Level_1)] + 6;
    notify = true
  elseif roll <= 80 then
    itemId = Gem_Level_1[math.random(1, #Gem_Level_1)] + 5;
    notify = true
  elseif roll <= 87 then
    itemId = 8927
    itemCount = 5
  elseif roll <= 93 then
    itemId = Orange_Favor[math.random(1, #Orange_Favor)]
    itemCount = 10
  else
    itemId = 8916
    itemCount = 30
  end

  package:DelItemSendMsg(9037, player);
  player:GetPackage():AddItem(itemId, itemCount, true);
  if notify then
    local prn
    if player:IsMale() then
      prn = '他'
    else
      prn = '她'
    end
    Broadcast(0x17, "[p:"..player:getCountry()..":"..player:getPName().."] 轻轻地打开了 [4:9037] ，一道金光扑面而来，"..prn.."获得了 [4:"..itemId.."]");
  end
  return num;
end

function ItemNormal_00009039(iid, num, bind, param)
  local player = GetPlayer();
  local package = player:GetPackage();
	if package:GetRestPackageSize() < 1 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
  local roll = math.random(1,1000) - 1;
  if roll < 10 then
    local c
    if roll == 0 then
      c = 888;
    else
      c = 100;
    end
    package:DelItemSendMsg(9039, player);
    player:getCoupon(c);
    Broadcast(0x17, "[p:"..player:getCountry()..":"..player:getPName().."] 打开 [4:9039] 获得礼券" .. c);
    return num;
  end
  local itemId = 15;
  local itemCount = 1;
  if roll < 160 then
    itemId = 8922;
  elseif roll < 310 then
    itemId = Gem_Level_2[math.random(1, #Gem_Level_2)];
    itemCount = 3;
  elseif roll < 460 then
    itemId = 8927;
  elseif roll < 510 then
    itemId = 8924;
  elseif roll < 610 then
    itemId = 8921;
  elseif roll < 710 then
    itemId = 56;
  elseif roll < 910 then
    itemId = 8941;
    itemCount = 3;
  end
  package:DelItemSendMsg(9039, player);
  player:GetPackage():AddItem(itemId, itemCount, true);
  return num;
end

function ItemNormal_00009040(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  package:DelItemSendMsg(9040, player);
  player:getTael(25*num)  
  return num;
end


function ItemNormal_00009041(iid, num, bind, param)
	local player = GetPlayer();
	local level = player:GetLev();
	if level >= 40 then  
		local package = player:GetPackage();
		
		local Equip_Index1 = math.random(1, 28);-- orange equip level 50、70 size 28
		local Equip_Index2 = math.random(1, 28);
		local randEquip1 = 0;
		local randEquip2 = 0;
		
		if level < 70 then
			randEquip1 = Orange_Equip_Level_50[Equip_Index1];
			randEquip2 = Orange_Equip_Level_50[Equip_Index2];
		else
			randEquip1 = Orange_Equip_Level_70[Equip_Index1];
			randEquip2 = Orange_Equip_Level_70[Equip_Index2];
		end
		
		local reqGrids = 0;
		
		local R_8916 = math.random(1, 100);
		local R_0056 = math.random(1, 100);
		local R_8923 = math.random(1, 100);
		local R_8920 = math.random(1, 100);
		local R_8929 = math.random(1, 100);
		local R_8903 = math.random(1, 100);
		local R_8902 = math.random(1, 100);
		local R_8941 = math.random(1, 100);
		local R_8940 = math.random(1, 100);
		local R_0009 = math.random(1, 100);
		local R_8919 = math.random(1, 100);
		local R_Equip = math.random(1, 100);
		
		
		if R_8916 <= 30 then		
			reqGrids = package:GetItemUsedGrids(8916, 1, 1);
		end
		if R_0056 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(56, 1, 1);	
		end
		if R_8923 <= 30 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8923, 2, 1);	
		end
		if R_8920 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8920, 1, 1);	
		end
		if R_8929 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8929, 1, 1);	
		end
		if R_8903 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8903, 1, 1);	
		end	
		if R_8902 <= 70 then		
			reqGrids = reqGrids + package:GetItemUsedGrids(8902, 2, 1);
		end
		if R_8941 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8941, 5, 1);	
		end
		if R_8940 <= 70 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8940, 1, 1);	
		end
		if R_0009 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(9, 1, 1);	
		end
		if R_8919 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8919, 1, 1);	
		end
		if R_Equip <= 10 then
			reqGrids = reqGrids + 2;	
		else
			reqGrids = reqGrids + 1;	
		end
		
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(9041, player);
			if R_8916 <= 30 then		
				package:AddItem(8916, 1, 1);
			end
			if R_0056 <= 30 then	
				package:AddItem(56, 1, 1);
			end
			if R_8923 <= 30 then			
				package:AddItem(8923, 2, 1);
			end
			if R_8920 <= 30 then	
				package:AddItem(8920, 1, 1);	
			end
			if R_8929 <= 30 then	
				package:AddItem(8929, 1, 1);	
			end
			if R_8903 <= 30 then	
				package:AddItem(8903, 1, 1);	
			end	
			if R_8902 <= 70 then		
				package:AddItem(8902, 2, 1);
			end
			if R_8941 <= 70 then	
				package:AddItem(8941, 5, 1);	
			end
			if R_8940 <= 70 then			
				package:AddItem(8940, 1, 1);	
			end
			if R_0009 <= 70 then	
				package:AddItem(9, 1, 1);	
			end
			if R_8919 <= 70 then	
				package:AddItem(8919, 1, 1);	
			end
			if R_Equip <= 10 then
				package:AddEquip(randEquip1, 1);	
				package:AddEquip(randEquip2, 1);
				BroadCastEquip2(player:getCountry(), player:getPName(), "帮派宝箱", GetItemName(randEquip1), GetItemName(randEquip2));
			else
				package:AddEquip(randEquip1, 1);
				BroadCastEquip1(player:getCountry(), player:getPName(), "帮派宝箱", GetItemName(randEquip1));
			end
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	
	end
	player:sendMsgCode(2, 1010, 0);
	return false;
end

function ItemNormal_00009201(iid, num, bind, param)
	local player = GetPlayer();
	local level = player:GetLev();
	if level >= 40 then  
		local package = player:GetPackage();
		
		local Equip_Index = math.random(1, #Orange_Equip_Level_50);
		local randEquip = Orange_Equip_Level_50[Equip_Index];
		
		local reqGrids = 0;
		
		local R_8916 = math.random(1, 100);
		local R_0056 = math.random(1, 100);
		local R_8923 = math.random(1, 100);
		local R_8920 = math.random(1, 100);
		local R_8929 = math.random(1, 100);
		local R_8903 = math.random(1, 100);
		local R_8902 = math.random(1, 100);
		local R_8941 = math.random(1, 100);
		local R_8940 = math.random(1, 100);
		local R_0009 = math.random(1, 100);
		local R_8919 = math.random(1, 100);
		local R_Equip = math.random(1, 100);
		
		
		if R_8916 <= 30 then		
			reqGrids = package:GetItemUsedGrids(8916, 1, 1);
		end
		if R_0056 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(56, 1, 1);	
		end
		if R_8923 <= 30 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8923, 2, 1);	
		end
		if R_8920 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8920, 1, 1);	
		end
		if R_8929 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8929, 1, 1);	
		end
		if R_8903 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8903, 1, 1);	
		end	
		if R_8902 <= 70 then		
			reqGrids = reqGrids + package:GetItemUsedGrids(8902, 2, 1);
		end
		if R_8941 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8941, 5, 1);	
		end
		if R_8940 <= 70 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8940, 1, 1);	
		end
		if R_0009 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(9, 1, 1);	
		end
		if R_8919 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8919, 1, 1);	
		end
		if R_Equip <= 75 then
			reqGrids = reqGrids + 1;	
		end
		reqGrids = reqGrids + 1;
		
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(9201, player);
			if R_8916 <= 30 then		
				package:AddItem(8916, 1, 1);
			end
			if R_0056 <= 30 then	
				package:AddItem(56, 1, 1);
			end
			if R_8923 <= 30 then			
				package:AddItem(8923, 2, 1);
			end
			if R_8920 <= 30 then	
				package:AddItem(8920, 1, 1);	
			end
			if R_8929 <= 30 then	
				package:AddItem(8929, 1, 1);	
			end
			if R_8903 <= 30 then	
				package:AddItem(8903, 1, 1);	
			end	
			if R_8902 <= 70 then		
				package:AddItem(8902, 2, 1);
			end
			if R_8941 <= 70 then	
				package:AddItem(8941, 5, 1);	
			end
			if R_8940 <= 70 then			
				package:AddItem(8940, 1, 1);	
			end
			if R_0009 <= 70 then	
				package:AddItem(4, 1, 1);	
			end
			if R_8919 <= 70 then	
				package:AddItem(8919, 1, 1);	
			end
			if R_Equip <= 75 then
				package:AddEquip(randEquip, 1);
				BroadCastEquip1(player:getCountry(), player:getPName(), "帮派宝箱", GetItemName(randEquip));
			end
				package:AddItem(Purple_Favor[math.random(1, #Purple_Favor)], 2, true);	
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	
	end
	player:sendMsgCode(2, 1010, 0);
	return false;
end
function ItemNormal_00009202(iid, num, bind, param)
	local player = GetPlayer();
	local level = player:GetLev();
	if level >= 40 then  
		local package = player:GetPackage();
		
		local Equip_Index = math.random(1, #Orange_Equip_Level_70);
		local randEquip = Orange_Equip_Level_70[Equip_Index];
		
		local reqGrids = 0;
		
		local R_8916 = math.random(1, 100);
		local R_0056 = math.random(1, 100);
		local R_8923 = math.random(1, 100);
		local R_8920 = math.random(1, 100);
		local R_8929 = math.random(1, 100);
		local R_8903 = math.random(1, 100);
		local R_8902 = math.random(1, 100);
		local R_8941 = math.random(1, 100);
		local R_8940 = math.random(1, 100);
		local R_0009 = math.random(1, 100);
		local R_8919 = math.random(1, 100);
		local R_Equip = math.random(1, 100);
		
		
		if R_8916 <= 30 then		
			reqGrids = package:GetItemUsedGrids(8916, 1, 1);
		end
		if R_0056 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(56, 1, 1);	
		end
		if R_8923 <= 30 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8923, 2, 1);	
		end
		if R_8920 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8920, 1, 1);	
		end
		if R_8929 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8929, 1, 1);	
		end
		if R_8903 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8903, 1, 1);	
		end	
		if R_8902 <= 70 then		
			reqGrids = reqGrids + package:GetItemUsedGrids(8902, 2, 1);
		end
		if R_8941 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8941, 5, 1);	
		end
		if R_8940 <= 70 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8940, 1, 1);	
		end
		if R_0009 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(9, 1, 1);	
		end
		if R_8919 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8919, 1, 1);	
		end
		if R_Equip <= 75 then
			reqGrids = reqGrids + 1;	
		end
		reqGrids = reqGrids + 1;	
		
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(9202, player);
			if R_8916 <= 30 then		
				package:AddItem(8916, 1, 1);
			end
			if R_0056 <= 30 then	
				package:AddItem(56, 1, 1);
			end
			if R_8923 <= 30 then			
				package:AddItem(8923, 2, 1);
			end
			if R_8920 <= 30 then	
				package:AddItem(8920, 1, 1);	
			end
			if R_8929 <= 30 then	
				package:AddItem(8929, 1, 1);	
			end
			if R_8903 <= 30 then	
				package:AddItem(8903, 1, 1);	
			end	
			if R_8902 <= 70 then		
				package:AddItem(8902, 2, 1);
			end
			if R_8941 <= 70 then	
				package:AddItem(8941, 5, 1);	
			end
			if R_8940 <= 70 then			
				package:AddItem(8940, 1, 1);	
			end
			if R_0009 <= 70 then	
				package:AddItem(9, 1, 1);	
			end
			if R_8919 <= 70 then	
				package:AddItem(8919, 1, 1);	
			end
			if R_Equip <= 75 then
				package:AddEquip(randEquip, 1);
				BroadCastEquip1(player:getCountry(), player:getPName(), "帮派宝箱", GetItemName(randEquip));
			end
			package:AddItem(Purple_Favor[math.random(1, #Purple_Favor)], 2, true);	
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	
	end
	player:sendMsgCode(2, 1010, 0);
	return false;
end
function ItemNormal_00009203(iid, num, bind, param)
	local player = GetPlayer();
	local level = player:GetLev();
	if level >= 40 then  
		local package = player:GetPackage();
		
		local Equip_Index = math.random(1, #Orange_Equip_Level_80);
		local randEquip = Orange_Equip_Level_80[Equip_Index];
		
		local reqGrids = 0;
		
		local R_8916 = math.random(1, 100);
		local R_0056 = math.random(1, 100);
		local R_8923 = math.random(1, 100);
		local R_8920 = math.random(1, 100);
		local R_8929 = math.random(1, 100);
		local R_8903 = math.random(1, 100);
		local R_8902 = math.random(1, 100);
		local R_8941 = math.random(1, 100);
		local R_8940 = math.random(1, 100);
		local R_0009 = math.random(1, 100);
		local R_8919 = math.random(1, 100);
		local R_Equip = math.random(1, 100);
		
		
		if R_8916 <= 30 then		
			reqGrids = package:GetItemUsedGrids(8916, 1, 1);
		end
		if R_0056 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(56, 1, 1);	
		end
		if R_8923 <= 30 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8923, 2, 1);	
		end
		if R_8920 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8920, 1, 1);	
		end
		if R_8929 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8929, 1, 1);	
		end
		if R_8903 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8903, 1, 1);	
		end	
		if R_8902 <= 70 then		
			reqGrids = reqGrids + package:GetItemUsedGrids(8902, 2, 1);
		end
		if R_8941 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8941, 5, 1);	
		end
		if R_8940 <= 70 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8940, 1, 1);	
		end
		if R_0009 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(9, 1, 1);	
		end
		if R_8919 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8919, 1, 1);	
		end
		if R_Equip <= 75 then
			reqGrids = reqGrids + 1;	
		end
		reqGrids = reqGrids + 1;	
		
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(9203, player);
			if R_8916 <= 30 then		
				package:AddItem(8916, 1, 1);
			end
			if R_0056 <= 30 then	
				package:AddItem(56, 1, 1);
			end
			if R_8923 <= 30 then			
				package:AddItem(8923, 2, 1);
			end
			if R_8920 <= 30 then	
				package:AddItem(8920, 1, 1);	
			end
			if R_8929 <= 30 then	
				package:AddItem(8929, 1, 1);	
			end
			if R_8903 <= 30 then	
				package:AddItem(8903, 1, 1);	
			end	
			if R_8902 <= 70 then		
				package:AddItem(8902, 2, 1);
			end
			if R_8941 <= 70 then	
				package:AddItem(8941, 5, 1);	
			end
			if R_8940 <= 70 then			
				package:AddItem(8940, 1, 1);	
			end
			if R_0009 <= 70 then	
				package:AddItem(9, 1, 1);	
			end
			if R_8919 <= 70 then	
				package:AddItem(8919, 1, 1);	
			end
			if R_Equip <= 75 then
				package:AddEquip(randEquip, 1);
				BroadCastEquip1(player:getCountry(), player:getPName(), "帮派宝箱", GetItemName(randEquip));
			end
			package:AddItem(Orange_Favor[math.random(1, #Orange_Favor)], 2, true);	
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	
	end
	player:sendMsgCode(2, 1010, 0);
	return false;
end
function ItemNormal_00009204(iid, num, bind, param)
	local player = GetPlayer();
	local level = player:GetLev();
	if level >= 40 then  
		local package = player:GetPackage();		
		local reqGrids = 0;
		
		local R_8916 = math.random(1, 100);
		local R_0056 = math.random(1, 100);
		local R_8923 = math.random(1, 100);
		local R_8920 = math.random(1, 100);
		local R_8929 = math.random(1, 100);
		local R_8903 = math.random(1, 100);
		local R_8902 = math.random(1, 100);
		local R_8941 = math.random(1, 100);
		local R_8940 = math.random(1, 100);
		local R_0009 = math.random(1, 100);
		local R_8919 = math.random(1, 100);
	
		
		if R_8916 <= 30 then		
			reqGrids = package:GetItemUsedGrids(8916, 1, 1);
		end
		if R_0056 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(56, 1, 1);	
		end
		if R_8923 <= 30 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8923, 2, 1);	
		end
		if R_8920 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8920, 1, 1);	
		end
		if R_8929 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8929, 1, 1);	
		end
		if R_8903 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8903, 1, 1);	
		end	
		if R_8902 <= 70 then		
			reqGrids = reqGrids + package:GetItemUsedGrids(8902, 2, 1);
		end
		if R_8941 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8941, 5, 1);	
		end
		if R_8940 <= 70 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8940, 1, 1);	
		end
		if R_0009 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(9, 1, 1);	
		end
		if R_8919 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8919, 1, 1);	
		end
		reqGrids = reqGrids + package:GetItemUsedGrids(9031, 1, 1);	--100% 乾坤碎片
		reqGrids = reqGrids + 1;	
				
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(9204, player);
			if R_8916 <= 30 then		
				package:AddItem(8916, 1, 1);
			end
			if R_0056 <= 30 then	
				package:AddItem(56, 1, 1);
			end
			if R_8923 <= 30 then			
				package:AddItem(8923, 2, 1);
			end
			if R_8920 <= 30 then	
				package:AddItem(8920, 1, 1);	
			end
			if R_8929 <= 30 then	
				package:AddItem(8929, 1, 1);	
			end
			if R_8903 <= 30 then	
				package:AddItem(8903, 1, 1);	
			end	
			if R_8902 <= 70 then		
				package:AddItem(8902, 2, 1);
			end
			if R_8941 <= 70 then	
				package:AddItem(8941, 5, 1);	
			end
			if R_8940 <= 70 then			
				package:AddItem(8940, 1, 1);	
			end
			if R_0009 <= 70 then	
				package:AddItem(9, 1, 1);	
			end
			if R_8919 <= 70 then	
				package:AddItem(8919, 1, 1);	
			end
			package:AddItem(9031, 1, 1);	
			BroadCastEquip1(player:getCountry(), player:getPName(), "帮派宝箱", GetItemName(9031));
			package:AddItem(Orange_Favor[math.random(1, #Orange_Favor)], 2, true);	
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;	
	end
	player:sendMsgCode(2, 1010, 0);
	return false;
end

function ItemNormal_00009216(iid, num, bind, param)
  local player = GetPlayer();
  local package = player:GetPackage();
	
  local reqGrids = 2 + package:GetItemUsedGrids(14, 6, 1)
  if reqGrids > package:GetRestPackageSize() then
		player:sendMsgCode(2, 1011, 0);
		return false;
  end
 
  local randGem = Gem_Level_3[math.random(1, #Gem_Level_3)];

  package:DelItemSendMsg(9216, player);  
  if math.random(1, 100) < 51 then
	package:AddItem(9214, 1, 1, 0, 2);	
	BroadCastEquip1(player:getCountry(), player:getPName(), "橙色任务经验宝箱", GetItemName(9214));
  else
	local randFavor = Diety_Favor[math.random(1, #Diety_Favor)];
	package:AddItem(randFavor, 2, 1, 0, 2);
	BroadCastEquip1(player:getCountry(), player:getPName(), "橙色任务经验宝箱", GetItemName(randFavor));
  end
  package:AddItem(randGem, 1, 1, 0, 2);
  package:AddItem(14, 6, 1, 0, 2);
 
  return num;
end

function ItemNormal_00009217(iid, num, bind, param)
	local player = GetPlayer();
	local level = player:GetLev();
	if level >= 40 then  
		local package = player:GetPackage();		
		local reqGrids = 0;
		
		local R_8916 = math.random(1, 100);
		local R_0056 = math.random(1, 100);
		local R_8923 = math.random(1, 100);
		local R_8920 = math.random(1, 100);
		local R_8929 = math.random(1, 100);
		local R_8903 = math.random(1, 100);
		local R_8902 = math.random(1, 100);
		local R_8941 = math.random(1, 100);
		local R_8940 = math.random(1, 100);
		local R_0009 = math.random(1, 100);
		local R_8919 = math.random(1, 100);
		
		
		if R_8916 <= 30 then		
			reqGrids = package:GetItemUsedGrids(8916, 1, 1);
		end
		if R_0056 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(56, 1, 1);	
		end
		if R_8923 <= 30 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8923, 2, 1);	
		end
		if R_8920 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8920, 1, 1);	
		end
		if R_8929 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8929, 1, 1);	
		end
		if R_8903 <= 30 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8903, 1, 1);	
		end	
		if R_8902 <= 70 then		
			reqGrids = reqGrids + package:GetItemUsedGrids(8902, 2, 1);
		end
		if R_8941 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8941, 5, 1);	
		end
		if R_8940 <= 70 then			
			reqGrids = reqGrids + package:GetItemUsedGrids(8940, 1, 1);	
		end
		if R_0009 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(9, 1, 1);	
		end
		if R_8919 <= 70 then	
			reqGrids = reqGrids + package:GetItemUsedGrids(8919, 1, 1);	
		end
		reqGrids = reqGrids + package:GetItemUsedGrids(9214, 1, 1);	--100%女娲碎片
		reqGrids = reqGrids + 1;
		
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(9217, player);
			if R_8916 <= 30 then		
				package:AddItem(8916, 1, 1);
			end
			if R_0056 <= 30 then	
				package:AddItem(56, 1, 1);
			end
			if R_8923 <= 30 then			
				package:AddItem(8923, 2, 1);
			end
			if R_8920 <= 30 then	
				package:AddItem(8920, 1, 1);	
			end
			if R_8929 <= 30 then	
				package:AddItem(8929, 1, 1);	
			end
			if R_8903 <= 30 then	
				package:AddItem(8903, 1, 1);	
			end	
			if R_8902 <= 70 then		
				package:AddItem(8902, 2, 1);
			end
			if R_8941 <= 70 then	
				package:AddItem(8941, 5, 1);	
			end
			if R_8940 <= 70 then			
				package:AddItem(8940, 1, 1);	
			end
			if R_0009 <= 70 then	
				package:AddItem(9, 1, 1);	
			end
			if R_8919 <= 70 then	
				package:AddItem(8919, 1, 1);	
			end
			package:AddItem(9214, 1, 1);	
			BroadCastEquip1(player:getCountry(), player:getPName(), "帮派宝箱", GetItemName(9214));
			package:AddItem(Diety_Favor[math.random(1, #Diety_Favor)], 2, true);	
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;	
	end
	player:sendMsgCode(2, 1010, 0);
	return false;
end

function ItemNormal_00009209(iid, num, bind, param)
	local rand = math.random(100);
	local itemId = 0;
	local count = 0;
	local player = GetPlayer();
	if rand < 13 then
		itemId = 8941;
		count = 10;
	elseif rand < 25 then
		itemId = 8999;
		count = 1;
	elseif rand < 26 then
		itemId = 5005;
		count = 1;
	elseif rand < 39 then
		itemId = 11;
		count = 1;
	elseif rand < 48 then
		itemId = 56;
		count = 1;
	elseif rand < 61 then
		itemId = 8916;
		count = 1;
	elseif rand < 62 then
		player:getCoupon(100);
		return num;
	elseif rand < 76 then
		itemId = 9
		count = 1;
	elseif rand < 88 then
		itemId = 6;
		count = 1;
	else
		itemId = 15;
		count = 1;
	end	
	local package = player:GetPackage();
	if package:GetItemUsedGrids(itemId, count, 1) > package:GetRestPackageSize() then
		player:sendMsgCode(2, 1011, 0);
		return false;
	else
		package:DelItemSendMsg(9209, player);	
		package:AddItem(itemId, count, 1);
		return num;
	end
end

function ItemNormal_00009210(iid, num, bind, param)
	local rand = math.random(100);
	local itemId = 0;
	local count = 0;
	local player = GetPlayer();
	if rand < 2 then
		itemId = 9000;
		count = 1;
		Broadcast(0x17, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了合家团圆礼包，一道金光扑面而来，获得了[4:9000]");
	elseif rand < 13 then
		local Gem_Level_7 = { 5007, 5017, 5027, 5037, 5047, 5077, 5087, 5097, 5107, 5117, 5127 };
		local rand_gem = math.random(1, #Gem_Level_7);
		itemId = Gem_Level_7[rand_gem];
		count = 1;
		Broadcast(0x17, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了合家团圆礼包，一道金光扑面而来，获得了[4:"..itemId.."]");
	elseif rand < 46 then
		local Gem_Level_6 = { 5006, 5016, 5026, 5036, 5046, 5076, 5086, 5096, 5106, 5116, 5126 };
		local rand_gem = math.random(1, #Gem_Level_6);
		itemId = Gem_Level_6[rand_gem];
		count = 1;
		Broadcast(0x17, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了合家团圆礼包，一道金光扑面而来，获得了[4:"..itemId.."]");
	elseif rand < 52 then
		itemId = 7;
		count = 20;
	elseif rand < 58 then
		local favor = {5820, 5821, 5822, 5823, 5824};
		local rand_favor = math.random(1, #favor);
		itemId = favor[rand_favor];
		count = 10;
	elseif rand < 65 then
		itemId = 8919;
		count = 10;
	elseif rand < 72 then
		itemId = 8927;
		count = 5;
	elseif rand < 79 then
		itemId = 8999;
		count = 20;
	elseif rand < 86 then
		itemId = 8924;
		count = 10;
	elseif rand < 93 then
		itemId = 8916;
		count = 20;
	else
		itemId = 15;
		count = 20;
	end
	local package = player:GetPackage();
	if package:GetItemUsedGrids(itemId, count, 1) > package:GetRestPackageSize() then
		player:sendMsgCode(2, 1011, 0);
		return false;
	else
		package:DelItemSendMsg(9210, player);
		package:AddItem(itemId, count, 1);
		return num;
	end
end

function ItemNormal_00009211(iid, num, bind, param)
  local player = GetPlayer()
  local package = player:GetPackage();
  player:setBuffData(5, 0, true)
  player:setBuffData(6, 0, true)
  local stage = getActivityStage();  
  if stage == 9 or stage == 10 then
	player:setBuffData(11, 0, true)
	if ItemNormal_AddBuff(player, 10, 3600, num, 36000) then
		package:DelItemSendMsg(9211, player);
		return num;
	end
  else
	player:setBuffData(10, 0, true)
	if ItemNormal_AddBuff(player, 11, 3600, num, 36000) then
		package:DelItemSendMsg(9211, player);
		return num;
	end
  end
	return false;
end

function ItemNormal_00009212(iid, num, bind, param)
 	local player = GetPlayer();
	local package = player:GetPackage();
	
	local gemSize = table.getn(Gem_Level_2);
	local randGem = Gem_Level_2[math.random(1, gemSize)];
	
	local randAmount = 0;      
	
	local equipSize = table.getn(Purple_Equip_Level_90)
	local randEquipPos1 = math.random(1, equipSize);
	local randEquipPos2 = math.random(1, equipSize);
	local randEquip1 = Purple_Equip_Level_90[randEquipPos1];
	local randEquip2 = Purple_Equip_Level_90[randEquipPos2];
		  
    local r = math.random(1, 100) / 100;
	if r <= 0.15 then
		randAmount = 2;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 7, 1);		
        reqGrids = reqGrids + 2;
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(9212, player);
			package:AddEquip(randEquip1, 1, 0, 2);
			package:AddEquip(randEquip2, 1, 0, 2);
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 7, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	else 	 
		randAmount = 1;
		local reqGrids = package:GetItemUsedGrids(randGem, 1, 1);        
        reqGrids = reqGrids + 1;
        reqGrids = reqGrids + package:GetItemUsedGrids(13, 7, 1);
		if reqGrids <= 	package:GetRestPackageSize() then
			package:DelItemSendMsg(9212, player);
			package:AddEquip(randEquip1, 1, 0, 2);			
			package:AddItem(randGem, 1, 1, 0, 2);
			package:AddItem(13, 7, 1, 0, 2);
			return num;
		end
		player:sendMsgCode(2, 1011, 0);
		return false;
	end	
end

function ItemNormal_00009213(iid, num, bind, param)
  local player = GetPlayer();
  local package = player:GetPackage();
	
  local reqGrids = 2 + package:GetItemUsedGrids(14, 6, 1)
  if reqGrids > package:GetRestPackageSize() then
		player:sendMsgCode(2, 1011, 0);
		return false;
  end
 
  local randGem = Gem_Level_3[math.random(1, #Gem_Level_3)];

  package:DelItemSendMsg(9213, player);  
  if math.random(1, 100) < 51 then
	package:AddItem(9031, 1, 1, 0, 2);	
	BroadCastEquip1(player:getCountry(), player:getPName(), "橙色任务经验宝箱", GetItemName(9031));
  else
	local randFavor = Orange_Favor[math.random(1, #Orange_Favor)];
	package:AddItem(randFavor, 2, 1, 0, 2);
	BroadCastEquip1(player:getCountry(), player:getPName(), "橙色任务经验宝箱", GetItemName(randFavor));
  end
  package:AddItem(randGem, 1, 1, 0, 2);
  package:AddItem(14, 6, 1, 0, 2);
 
  return num;
end

function ItemNormal_00007xxx(iid, num, bind, param)
 	local player = GetPlayer()
	local fgt = player:findFighter(param)
  if fgt == nil then
    return false
  end
  local skillId = (math.floor((iid - 7000) / 20) + 1) * 100 + ((iid - 7000) % 20)
  if not fgt:learnSkill(skillId) then
    return false
  end
  player:GetPackage():DelItemSendMsg(iid, player)
  return num
end

function ItemNormal_SkillLvUp(iid, num, bind, param)
 	local player = GetPlayer()
	local fgt = player:findFighter(param)
  if fgt == nil then
    return false
  end
  local skillLevel = iid - 9017
  if not fgt:skillLevelUp(skillLevel) then
    return false
  end
  player:GetPackage():DelItemSendMsg(iid, player)
  return num
end

local SkillPageRange = {
  9042, 9044, 9047, 9051, 9056, 9062, 9069, 9077, 9087
}
function ItemNormal_SkillPage(iid, num, bind, param)
 	local player = GetPlayer()
  local package = player:GetPackage()
  local n = 2
  for i = 2, 9 do
    if iid < SkillPageRange[i] then
      n = i
      break
    end
  end
  if package:GetRestPackageSize() < package:GetItemUsedGrids(9017 + n, num, true) then
    player:sendMsgCode(2, 1011, 0)
    return false
  end
  for i = SkillPageRange[n - 1], SkillPageRange[n] - 1 do
    if package:GetItemNum(i, false) < num then
      player:sendMsgCode(2, 2156, i)
      return false
    end
  end
  for i = SkillPageRange[n - 1], SkillPageRange[n] - 1 do
    player:GetPackage():DelItemSendMsg(i, player)
    if i ~= iid then
      package:DelItem(i, num, false)
    end
  end
  package:AddItem(9017 + n, num, true)
  return num;
end

function ItemNormal_00009214(iid, num, bind, param)
	if(num ~= 4) then
		return false;
	end
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 1 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	package:DelItemSendMsg(9214, player);
	equip = math.random(1, table.getn(Orange_Equip_Level_100));
	package:AddEquip(Orange_Equip_Level_100[equip], bind, 0, 5);--for backstatge 5 for equip from merge

	return num;
end
function ItemNormal_00009223(iid, num, bind, param)
 	local player = GetPlayer()
	local package = player:GetPackage()	
	if package:GetRestPackageSize() < 2 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end		
	local itemId = 8924;
	local count = 1;
	local rand = math.random(1, 100);
	if rand == 1 then
		package:DelItemSendMsg(9223, player);
		player:getCoupon(188);
		Broadcast(0x17, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了[4:9223]，一道金光扑面而来，获得了礼券188");
		return num;  
	elseif rand == 2 then
		itemId = 5055;
		Broadcast(0x17, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了[4:9223]，一道金光扑面而来，获得了[4:5055]");
	elseif rand <= 14 then
		itemId = 8999;
	elseif rand <= 27 then
		itemId = 8941;
		count = 10;
	elseif rand <= 40 then
		itemId = 11;
	elseif rand <= 51 then
		itemId = 56;
	elseif rand <= 64 then
		itemId = 8916;
	elseif rand <= 77 then
		itemId = 9;
	elseif rand <= 90 then
		itemId = 7;		
	end
	package:DelItemSendMsg(9223, player);
	package:AddItem(itemId, count, 1, 0, 2);
	package:AddItem(Orange_Favor[math.random(1, #Orange_Favor)], 1, 1, 0, 2);
	return num;
end
function ItemNormal_00009225(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
	if package:GetRestPackageSize() < 2 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end
	local roll = math.random(1,1000) - 1;
	if roll < 20 then
		local c
		if roll < 5 then
			c = 888;
		else
			c = 100;
		end
		package:DelItemSendMsg(9225, player);
		player:getCoupon(c);
		Broadcast(0x17, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了[4:9225]，一道金光扑面而来，获得了礼券".. c);
		return num;
	end
	local itemId = 15;
	local itemCount = 1;
	if roll < 120 then
		itemId = 8924;
		itemCount = 2;
	elseif roll < 270 then
		itemId = 8923;
		itemCount = 5;
	elseif roll < 380 then
		itemId = 8922;
		itemCount = 10;
	elseif roll < 480 then
		itemId = Gem_Level_2[math.random(1, #Gem_Level_2)];
		itemCount = 3;
	elseif roll < 600 then
		itemId = 8927;
	elseif roll < 750 then
		itemId = 56;
	elseif roll < 900 then	
		itemId = 8941;
		itemCount = 10;
	end
	package:DelItemSendMsg(9225, player);
	package:AddItem(itemId, itemCount, true, 0, 2);
	package:AddItem(Orange_Favor[math.random(1, #Orange_Favor)], 1, 1, 0, 2);
	return num;
end

function ItemNormal_citta(iid, num, bind, param)
	local player = GetPlayer();
	local package = player:GetPackage();
    local cittaid = iid - CittaBookBase + 1
	local fgt = player:findFighter(param);
	if fgt == nil then
		return false;
	end
    local cls = fgt:getClass()
    local car = package:GetItemCareer(iid, bind)
    if car ~= 0 then
        if cls ~= car then
            return false
        end
    end
    if not fgt:addNewCitta(cittaid*100+1, true, false) then
        return false;
    end
	package:DelItemSendMsg(iid, player);
    return num
end

function ItemNormal_formation(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();

    if package:GetItemNum(iid, true) == 0 and package:GetItemNum(iid, false) ==0 then
        return false;
    end

    local formation = iid - FormationBookBase + 1
    if not player:addNewFormation(formation * 100 + 1, true) then
        return false;
    end
    package:DelItemSendMsg(iid, player);
    return num
end

function ItemNormal_00000068(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 1 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    for i = 1,num
    do
        player:getGold(1000);
        local val = math.random(1, 100)
        local equips = {}
        if val < 75 then
            equips = Athletics_Purple_Equip_Level_50
        else
            equips = Athletics_Orange_Equip_Level_50
        end
        local size = table.getn(equips);
        if size > 0 then
            package:AddEquip(equips[math.random(1, size)], 1);
        end
    end
    package:DelItemSendMsg(68, player);
    return num;
end

function ItemNormal_00000007(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 20 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    local fgt = player:getMainFighter();
	if fgt == nil then
		return false;
	end
    local cls = fgt:getClass()


    -- 太乙精金
    package:AddItem(503, 5, true, 0, 2);
    -- 五行精金
    package:AddItem(515, 1, true, 0, 2);
    -- 高级挂机加速符
    package:AddItem(56, 12, true, 0, 2);
    -- 修炼加速符
    package:AddItem(57, 12, true, 0, 2);
    -- 五级暴击石
    package:AddItem(5115, 1, true, 0, 2);
    -- 精致拆卸石
    package:AddItem(505, 1, true, 0, 2);
    -- 宝石保护符
    package:AddItem(513, 3, true, 0, 2);
    -- 初级打孔石
    package:AddItem(510, 2, true, 0, 2);
    -- 中级打孔石
    package:AddItem(511, 2, true, 0, 2);
    -- 高级打孔石
    package:AddItem(512, 2, true, 0, 2);
    -- 兜率精金
    package:AddItem(47, 1, true, 0, 2);
    -- 九龙神火
    package:AddItem(50, 1, true, 0, 2);
    -- 凝神易经丹
    package:AddItem(509, 2, true, 0, 2);
    -- 补髓益元丹
    package:AddItem(507, 2, true, 0, 2);
    -- 自动回血符
    package:AddItem(9, 5, true, 0, 2);
    -- 洗练符
    package:AddItem(500, 5, true, 0, 2);
    -- 洗练符保护符
    package:AddItem(501, 2, true, 0, 2);
    -- 银票
    package:AddItem(15, 10, true, 0, 2);

    local Equip30 = {2393, 2385, 2377}
    local Equip50 = {2545, 2553, 2561}
    -- 30紫头
    package:AddEquip(Equip30[cls], 1);
    -- 50橙头
    package:AddEquip(Equip50[cls], 1);

    package:DelItemSendMsg(7, player);
    return num;
end

function ItemNormal_00000067(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 20 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    local fgt = player:getMainFighter();
	if fgt == nil then
		return false;
	end
    local cls = fgt:getClass()


    -- 太乙精金
    package:AddItem(503, 5, true, 0, 2);
    -- 五行精金
    package:AddItem(515, 1, true, 0, 2);
    -- 高级挂机加速符
    package:AddItem(56, 12, true, 0, 2);
    -- 修炼加速符
    package:AddItem(57, 12, true, 0, 2);
    -- 五级暴击石
    package:AddItem(5115, 1, true, 0, 2);
    -- 精致拆卸石
    package:AddItem(505, 1, true, 0, 2);
    -- 宝石保护符
    package:AddItem(513, 3, true, 0, 2);
    -- 初级打孔石
    package:AddItem(510, 2, true, 0, 2);
    -- 中级打孔石
    package:AddItem(511, 2, true, 0, 2);
    -- 高级打孔石
    package:AddItem(512, 2, true, 0, 2);
    -- 兜率精金
    package:AddItem(47, 1, true, 0, 2);
    -- 九龙神火
    package:AddItem(50, 1, true, 0, 2);
    -- 凝神易经丹
    package:AddItem(509, 2, true, 0, 2);
    -- 补髓益元丹
    package:AddItem(507, 2, true, 0, 2);
    -- 自动回血符
    package:AddItem(9, 5, true, 0, 2);
    -- 洗练符
    package:AddItem(500, 5, true, 0, 2);
    -- 洗练符保护符
    package:AddItem(501, 2, true, 0, 2);
    -- 银票
    package:AddItem(15, 10, true, 0, 2);

    local Equip30 = {2393, 2385, 2377}
    local Equip50 = {2545, 2553, 2561}
    -- 30紫头
    package:AddEquip(Equip30[cls], 1);
    -- 50橙头
    package:AddEquip(Equip50[cls], 1);


    package:DelItemSendMsg(67, player);
    return num;
end



function ItemNormal_00000078(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 2 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    -- 高级挂机加速符
    package:AddItem(56, 8, true, 0, 2);
    -- 修炼加速符
    package:AddItem(57, 8, true, 0, 2);

    package:DelItemSendMsg(78, player);
    return num;
end

function ItemNormal_00000079(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 3 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    -- 太乙精金
    package:AddItem(503, 10, true, 0, 2);
    -- 洗练符
    package:AddItem(500, 2, true, 0, 2);
    -- 洗练符保护符
    package:AddItem(501, 2, true, 0, 2);

    package:DelItemSendMsg(79, player);
    return num;
end

function ItemNormal_00000080(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 2 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    -- 兜率精金
    package:AddItem(47, 3, true, 0, 2);
    -- 九龙神火
    package:AddItem(50, 3, true, 0, 2);

    package:DelItemSendMsg(80, player);
    return num;
end

function ItemNormal_00000081(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 3 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    -- 宝石保护符
    package:AddItem(513, 6, true, 0, 2);
    -- 精致拆卸石
    package:AddItem(505, 2, true, 0, 2);
    -- 高级打孔石
    package:AddItem(512, 2, true, 0, 2);

    package:DelItemSendMsg(81, player);
    return num;
end


function ItemNormal_athletics_2(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 5 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    local level = player:GetLev();
    level = math.floor((math.floor((level) / 10)) * 10)
    local tmpEquipTable = Athletics_Orange_Equip[level]

    if tmpEquipTable == nil then
        if level > 70 then
            tmpEquipTable = Athletics_Orange_Equip[70]
        else
            tmpEquipTable = Athletics_Orange_Equip[50]
        end
    end

    local equipId = 0;
    if tmpEquipTable ~= nil then
        local tmpSize = table.getn(tmpEquipTable);
        equipId = tmpEquipTable[math.random(1, tmpSize)];
        package:AddEquip(equipId, 1);
    end

    -- 补髓益元丹
    package:AddItem(507, 3, true, 0, 2);
    -- 凝神易经丹
    package:AddItem(509, 3, true, 0, 2);
    -- 五行精金
    package:AddItem(515, 1, true, 0, 2);
    -- 太乙精金
    package:AddItem(503, 3, true, 0, 2);

    Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]打开[4:2]，获得[4:507]x3、 [4:509]x3、 [4:515]x1、 [4:503]x3 [4:"..equipId.."]");

    package:DelItemSendMsg(2, player);

    return num;
end

function ItemNormal_athletics_3(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 5 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    local level = player:GetLev();
    level = math.floor((math.floor((level) / 10)) * 10)
    local tmpEquipTable = Athletics_Orange_Equip[level]

    if tmpEquipTable == nil then
        if level > 70 then
            tmpEquipTable = Athletics_Orange_Equip[70]
        else
            tmpEquipTable = Athletics_Orange_Equip[50]
        end
    end

    local equipId = 0;
    if tmpEquipTable ~= nil then
        local tmpSize = table.getn(tmpEquipTable);
        equipId = tmpEquipTable[math.random(1, tmpSize)];
        package:AddEquip(equipId, 1);
    end

    -- 补髓益元丹
    package:AddItem(507, 2, true, 0, 2);
    -- 凝神易经丹
    package:AddItem(509, 2, true, 0, 2);
    -- 太乙精金
    package:AddItem(503, 3, true, 0, 2);

    Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]打开[4:3]，获得[4:507]x2、 [4:509]x2、 [4:503]x3 [4:"..equipId.."]");

    package:DelItemSendMsg(3, player);

    return num;
end

function ItemNormal_athletics_4(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 5 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    local level = player:GetLev();
    level = math.floor((math.floor((level) / 10)) * 10)
    local tmpEquipTable = Athletics_Orange_Equip[level]

    if tmpEquipTable == nil then
        if level > 70 then
            tmpEquipTable = Athletics_Orange_Equip[70]
        else
            tmpEquipTable = Athletics_Orange_Equip[50]
        end
    end

    local equipId = 0;
    if tmpEquipTable ~= nil then
        local tmpSize = table.getn(tmpEquipTable);
        equipId = tmpEquipTable[math.random(1, tmpSize)];
        package:AddEquip(equipId, 1);
    end

    -- 补髓益元丹
    package:AddItem(507, 1, true, 0, 2);
    -- 凝神丹易筋丹
    package:AddItem(509, 1, true, 0, 2);
    -- 太乙精金
    package:AddItem(503, 3, true, 0, 2);

    Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]打开[4:4]，获得[4:507]、 [4:508]、 [4:503]x3 [4:"..equipId.."]");

    package:DelItemSendMsg(4, player);

    return num;
end



function ItemNormal_athletics_5(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 5 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    local level = player:GetLev();
    level = math.floor((math.floor((level) / 10)) * 10)
    local tmpEquipTable = Athletics_Purple_Equip[level]

    if tmpEquipTable == nil then
        if level > 100 then
            tmpEquipTable = Athletics_Purple_Equip[100]
        else
            tmpEquipTable = Athletics_Purple_Equip[40]
        end
    end

    local equipId = 0;
    if tmpEquipTable ~= nil then
        local tmpSize = table.getn(tmpEquipTable);
        equipId = tmpEquipTable[math.random(1, tmpSize)];
        package:AddEquip(equipId, 1);
    end

    -- 九龙神火
    package:AddItem(50, 1, true, 0, 2);
    -- 乾坤净水
    package:AddItem(49, 1, true, 0, 2);
    -- 太乙精金
    package:AddItem(503, 3, true, 0, 2);

    Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]打开[4:5]，获得[4:50]、[4:49]、[4:503]x3、[4:"..equipId.."]");

    package:DelItemSendMsg(5, player);

    return num;
end

function ItemNormal_athletics_6(iid, num, bind, param)
    local player = GetPlayer();
    player:getCoupon(15);
    return 1;
end



function ItemNormal_athletics_22(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 1 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    local roll = math.random(1, 100);
    local itemId = 0;

    local level = player:GetLev();
    level = math.floor((math.floor((level) / 10)) * 10)
    local tmpEquipTable = Athletics_Green_Equip[level]

    if tmpEquipTable == nil then
        if level > 90 then
            tmpEquipTable = Athletics_Green_Equip[90]
        end
    end

    if tmpEquipTable ~= nil then
        local tmpSize = table.getn(tmpEquipTable);
        package:AddEquip(tmpEquipTable[math.random(1, tmpSize)], 1);
    end

    package:DelItemSendMsg(22, player);
    if roll < 21 then
        player:getCoupon(10);
    elseif roll < 41 then
		itemId = 55;
    elseif roll < 61 then
        player:getTael(500);
    elseif roll < 95 then
        player:getTael(300);
    else
        player:getCoupon(20);
    end

    if itemId ~= 0 then
        package:AddItem(itemId, 1, true, 0, 2);
    end

    return num;
end

function ItemNormal_athletics_23(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 1 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    local roll = math.random(1, 100);
    local itemId = 0;

    local level = player:GetLev();
    level = math.floor((math.floor((level) / 10)) * 10)
    local tmpEquipTable = Athletics_Blue_Equip[level]

    if tmpEquipTable == nil then
        if level > 90 then
            tmpEquipTable = Athletics_Blue_Equip[90]
        end
    end

    if tmpEquipTable ~= nil then
        local tmpSize = table.getn(tmpEquipTable);
        package:AddEquip(tmpEquipTable[math.random(1, tmpSize)], 1);
    end


    package:DelItemSendMsg(23, player);
    if roll < 21 then
        player:getCoupon(30);
    elseif roll < 41 then
		itemId = 511;
    elseif roll < 61 then
        player:getTael(1500);
    elseif roll < 95 then
        player:getTael(1000);
    else
        player:getCoupon(50);
    end

    if itemId ~= 0 then
        package:AddItem(itemId, 1, true, 0, 2);
    end

    return num;
end

function ItemNormal_athletics_24(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 1 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    local roll = math.random(1, 100);
    local itemId = 0;

    local level = player:GetLev();
    level = math.floor((math.floor((level) / 10)) * 10)
    local tmpEquipTable = Athletics_Purple_Equip[level]

    if tmpEquipTable == nil then
        if level > 100 then
            tmpEquipTable = Athletics_Purple_Equip[100]
        else
            tmpEquipTable = Athletics_Purple_Equip[40]
        end
    end

    local equipId = 0;
    if tmpEquipTable ~= nil then
        local tmpSize = table.getn(tmpEquipTable);
        equipId = tmpEquipTable[math.random(1, tmpSize)];
    end


    package:DelItemSendMsg(24, player);
    if roll < 21 then
		Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了[4:24]，一道金光扑面而来，获得了礼券60 和[4:"..equipId.."]");
        player:getCoupon(60);
    elseif roll < 41 then
		Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了[4:24]，一道金光扑面而来，获得了银币4000 和[4:"..equipId.."]");
        player:getTael(4000);
    elseif roll < 61 then
		itemId = 48;
		Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了[4:24]，一道金光扑面而来，获得了[4:48] 和[4:"..equipId.."]");
    elseif roll < 95 then
        player:getTael(2000);
		Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了[4:24]，一道金光扑面而来，获得了银币2000 和[4:"..equipId.."]");
    else
		Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了[4:24]，一道金光扑面而来，获得了礼券90 和[4:"..equipId.."]");
        player:getCoupon(90);
    end

    if equipId ~= 0 then
		package:AddEquip(equipId, 1);
    end

    if itemId ~= 0 then
        package:AddItem(itemId, 1, true, 0, 2);
    end

    return num;
end

function ItemNormal_athletics_25(iid, num, bind, param)
    local player = GetPlayer();
    local package = player:GetPackage();
	if package:GetRestPackageSize() < 1 then		
		player:sendMsgCode(2, 1011, 0);
		return false;
	end

    local roll = math.random(1, 100);
    local itemId = 0;

    local level = player:GetLev();
    level = math.floor((math.floor((level) / 10)) * 10)
    local tmpEquipTable = Athletics_Orange_Equip[level]

    if tmpEquipTable == nil then
        if level > 70 then
            tmpEquipTable = Athletics_Orange_Equip[70]
        else
            tmpEquipTable = Athletics_Orange_Equip[50]
        end
    end

    if tmpEquipTable ~= nil then
        local tmpSize = table.getn(tmpEquipTable);
        equipId = tmpEquipTable[math.random(1, tmpSize)];
    end


    package:DelItemSendMsg(25, player);
    if roll < 21 then
		Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了[4:25]，一道金光扑面而来，获得了礼券100 和[4:"..equipId.."]");
        player:getCoupon(100);
    elseif roll < 41 then
		Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了[4:25]，一道金光扑面而来，获得了银币10000 和[4:"..equipId.."]");
        player:getTael(10000);
    elseif roll < 61 then
		Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了[4:25]，一道金光扑面而来，获得了[4:49] 和[4:"..equipId.."]");
		itemId = 49;
    elseif roll < 95 then
        player:getTael(10000);
		Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了[4:25]，一道金光扑面而来，获得了银币6000 和[4:"..equipId.."]");
    else
		Broadcast(0x27, "[p:"..player:getCountry()..":"..player:getPName().."]轻轻地打开了[4:25]，一道金光扑面而来，获得了礼券200 和[4:"..equipId.."]");
        player:getCoupon(200);
    end

    if equipId ~= 0 then
		package:AddEquip(equipId, 1);
    end

    if itemId ~= 0 then
        package:AddItem(itemId, 1, true, 0, 2);
    end

    return num;
end

local ItemNormal_Table = {
  [7001] = ItemNormal_00007xxx,
  [7002] = ItemNormal_00007xxx,
  [7003] = ItemNormal_00007xxx,
  [7004] = ItemNormal_00007xxx,
  [7005] = ItemNormal_00007xxx,
  [7006] = ItemNormal_00007xxx,
  [7007] = ItemNormal_00007xxx,
  [7008] = ItemNormal_00007xxx,
  [7009] = ItemNormal_00007xxx,
  [7010] = ItemNormal_00007xxx,
  [7021] = ItemNormal_00007xxx,
  [7022] = ItemNormal_00007xxx,
  [7023] = ItemNormal_00007xxx,
  [7024] = ItemNormal_00007xxx,
  [7025] = ItemNormal_00007xxx,
  [7026] = ItemNormal_00007xxx,
  [7027] = ItemNormal_00007xxx,
  [7028] = ItemNormal_00007xxx,
  [7029] = ItemNormal_00007xxx,
  [7030] = ItemNormal_00007xxx,
  [7041] = ItemNormal_00007xxx,
  [7042] = ItemNormal_00007xxx,
  [7043] = ItemNormal_00007xxx,
  [7044] = ItemNormal_00007xxx,
  [7045] = ItemNormal_00007xxx,
  [7046] = ItemNormal_00007xxx,
  [7047] = ItemNormal_00007xxx,
  [7048] = ItemNormal_00007xxx,
  [7049] = ItemNormal_00007xxx,
  [7050] = ItemNormal_00007xxx,

  [1] = ItemNormal_00000001,
	[8901] = ItemNormal_00008901,
	[8902] = ItemNormal_00008902,
	[8903] = ItemNormal_00008903,
	[8904] = ItemNormal_00008904,
	[8905] = ItemNormal_00008905,
	[8906] = ItemNormal_00008906,
	[8907] = ItemNormal_00008907,
--	[6] = ItemNormal_00000006,
--	[7] = ItemNormal_00000007,
	[8] = ItemNormal_00000008,
	[9] = ItemNormal_00000009,
	[8931] = ItemNormal_00008931,
	[55] = ItemNormal_00000055,
	[56] = ItemNormal_00000056,
	[57] = ItemNormal_00000057,
	[58] = ItemNormal_00000058,
	[12] = ItemNormal_00000012,
	[13] = ItemNormal_00000013,
	[14] = ItemNormal_00000014,
	[15] = ItemNormal_00000015,
	[8938] = ItemNormal_00008938,
	[8939] = ItemNormal_00008939,
	[8940] = ItemNormal_00008940,
	[17] = ItemNormal_00000017,
	[18] = ItemNormal_00000018,
	[19] = ItemNormal_00000019,
	[20] = ItemNormal_00000020,
	[21] = ItemNormal_00000021,
    [26] = ItemNormal_00000026,
    [27] = ItemNormal_00000027,
    [28] = ItemNormal_00000028,
	[29] = ItemNormal_00000029,
	[30] = ItemNormal_00000030,
	[31] = ItemNormal_00000031,
	[35] = ItemNormal_00000035,
	[36] = ItemNormal_00000036,
	[37] = ItemNormal_00000037,
	[38] = ItemNormal_00000038,
	[39] = ItemNormal_00000039,
	[40] = ItemNormal_00000040,
	[43] = ItemNormal_00000043,
	[52] = ItemNormal_00000052,
	[53] = ItemNormal_00000053,
	[66] = ItemNormal_00000066,
    [69] = ItemNormal_00000069,
	[8947] = ItemNormal_00008947,
	[8949] = ItemNormal_00008949,
	[8950] = ItemNormal_00008950,
	[8951] = ItemNormal_00008951,
	[8952] = ItemNormal_00008952,
	[8953] = ItemNormal_00008953,
	[8954] = ItemNormal_00008954,
	[8955] = ItemNormal_00008955,
	[8956] = ItemNormal_00008956,
	[8957] = ItemNormal_00008957,
	[8958] = ItemNormal_00008958,
	[8959] = ItemNormal_00008959,
	[8960] = ItemNormal_00008960,
	[8961] = ItemNormal_00008961,
	[8962] = ItemNormal_00008962,
	[8963] = ItemNormal_00008963,
	[8964] = ItemNormal_00008964,
	[8965] = ItemNormal_00008965,
	[8966] = ItemNormal_00008966,
	[8967] = ItemNormal_00008967,
	[8968] = ItemNormal_00008968,
	[8969] = ItemNormal_00008969,
	[8970] = ItemNormal_00008970,
	[8971] = ItemNormal_00008971,
	[8972] = ItemNormal_00008972,
	[8973] = ItemNormal_00008973,
	[8974] = ItemNormal_00008974,
	[8975] = ItemNormal_00008975,
	[8976] = ItemNormal_00008976,
	[8977] = ItemNormal_00008977,
	[8978] = ItemNormal_00008978,
	[8979] = ItemNormal_00008979,
	[8980] = ItemNormal_00008980,
	[8981] = ItemNormal_00008981,
	[8982] = ItemNormal_00008982,
	[8983] = ItemNormal_00008983,
	[8984] = ItemNormal_00008984,
	[8985] = ItemNormal_00008985,
	[8986] = ItemNormal_00008986,
	[8987] = ItemNormal_00008987,
	[8988] = ItemNormal_00008988,
	[8989] = ItemNormal_00008989,
	[8990] = ItemNormal_00008990,
	[8991] = ItemNormal_00008991,
	[8992] = ItemNormal_00008992,
	[8993] = ItemNormal_00008993,
	[8994] = ItemNormal_00008994,
	[8995] = ItemNormal_00008995,
	[8997] = ItemNormal_00008997,
	[8998] = ItemNormal_00008998,
	[9002] = ItemNormal_00009002,
	[9003] = ItemNormal_00009003,
	[9005] = ItemNormal_00009005,
	[9006] = ItemNormal_00009006,
	[9007] = ItemNormal_00009007,
	[9008] = ItemNormal_00009008,
	[9009] = ItemNormal_00009009,
	[9010] = ItemNormal_00009010,
	[9011] = ItemNormal_00009011,
	[9012] = ItemNormal_00009012,
	[9013] = ItemNormal_00009013,
	[9014] = ItemNormal_00009014,
	[9015] = ItemNormal_00009015,
	[9016] = ItemNormal_00009016,
	[9017] = ItemNormal_00009017,
	[9031] = ItemNormal_00009031,
	[9027] = ItemNormal_00009027,
	[9028] = ItemNormal_00009028,
	[9029] = ItemNormal_00009029,
	[9030] = ItemNormal_00009030,
	[9036] = ItemNormal_00009036,
	[9037] = ItemNormal_00009037,
	[9039] = ItemNormal_00009039,
	[9040] = ItemNormal_00009040,
	[9041] = ItemNormal_00009041,

  [9018] = ItemNormal_SkillLvUp,
  [9019] = ItemNormal_SkillLvUp,
  [9020] = ItemNormal_SkillLvUp,
  [9021] = ItemNormal_SkillLvUp,
  [9022] = ItemNormal_SkillLvUp,
  [9023] = ItemNormal_SkillLvUp,
  [9024] = ItemNormal_SkillLvUp,
  [9025] = ItemNormal_SkillLvUp,
  [9026] = ItemNormal_SkillLvUp,

  [9042] = ItemNormal_SkillPage,
  [9043] = ItemNormal_SkillPage,
  [9044] = ItemNormal_SkillPage,
  [9045] = ItemNormal_SkillPage,
  [9046] = ItemNormal_SkillPage,
  [9047] = ItemNormal_SkillPage,
  [9048] = ItemNormal_SkillPage,
  [9049] = ItemNormal_SkillPage,
  [9050] = ItemNormal_SkillPage,
  [9051] = ItemNormal_SkillPage,
  [9052] = ItemNormal_SkillPage,
  [9053] = ItemNormal_SkillPage,
  [9054] = ItemNormal_SkillPage,
  [9055] = ItemNormal_SkillPage,
  [9056] = ItemNormal_SkillPage,
  [9057] = ItemNormal_SkillPage,
  [9058] = ItemNormal_SkillPage,
  [9059] = ItemNormal_SkillPage,
  [9060] = ItemNormal_SkillPage,
  [9061] = ItemNormal_SkillPage,
  [9062] = ItemNormal_SkillPage,
  [9063] = ItemNormal_SkillPage,
  [9064] = ItemNormal_SkillPage,
  [9065] = ItemNormal_SkillPage,
  [9066] = ItemNormal_SkillPage,
  [9067] = ItemNormal_SkillPage,
  [9068] = ItemNormal_SkillPage,
  [9069] = ItemNormal_SkillPage,
  [9070] = ItemNormal_SkillPage,
  [9071] = ItemNormal_SkillPage,
  [9072] = ItemNormal_SkillPage,
  [9073] = ItemNormal_SkillPage,
  [9074] = ItemNormal_SkillPage,
  [9075] = ItemNormal_SkillPage,
  [9076] = ItemNormal_SkillPage,
  [9077] = ItemNormal_SkillPage,
  [9078] = ItemNormal_SkillPage,
  [9079] = ItemNormal_SkillPage,
  [9080] = ItemNormal_SkillPage,
  [9081] = ItemNormal_SkillPage,
  [9082] = ItemNormal_SkillPage,
  [9083] = ItemNormal_SkillPage,
  [9084] = ItemNormal_SkillPage,
  [9085] = ItemNormal_SkillPage,
  [9086] = ItemNormal_SkillPage,

  [9201] = ItemNormal_00009201,
	[9202] = ItemNormal_00009202,
	[9203] = ItemNormal_00009203,
	[9204] = ItemNormal_00009204,
	[9209] = ItemNormal_00009209,
	[9210] = ItemNormal_00009210,
	[9211] = ItemNormal_00009211,
	[9212] = ItemNormal_00009212,
	[9213] = ItemNormal_00009213,
	[9214] = ItemNormal_00009214,
	[9216] = ItemNormal_00009216,
	[9217] = ItemNormal_00009217,
	[9223] = ItemNormal_00009223,
	[9225] = ItemNormal_00009225,

    [1200] = ItemNormal_citta,
    [1201] = ItemNormal_citta,
    [1202] = ItemNormal_citta,
    [1203] = ItemNormal_citta,
    [1204] = ItemNormal_citta,
    [1205] = ItemNormal_citta,
    [1206] = ItemNormal_citta,
    [1207] = ItemNormal_citta,
    [1208] = ItemNormal_citta,
    [1209] = ItemNormal_citta,
    [1210] = ItemNormal_citta,
    [1211] = ItemNormal_citta,
    [1212] = ItemNormal_citta,
    [1213] = ItemNormal_citta,
    [1214] = ItemNormal_citta,
    [1215] = ItemNormal_citta,
    [1216] = ItemNormal_citta,
    [1217] = ItemNormal_citta,
    [1218] = ItemNormal_citta,
    [1219] = ItemNormal_citta,
    [1220] = ItemNormal_citta,
    [1221] = ItemNormal_citta,
    [1222] = ItemNormal_citta,
    [1223] = ItemNormal_citta,
    [1224] = ItemNormal_citta,
    [1225] = ItemNormal_citta,
    [1226] = ItemNormal_citta,
    [1227] = ItemNormal_citta,
    [1228] = ItemNormal_citta,
    [1229] = ItemNormal_citta,
    [1230] = ItemNormal_citta,
    [1231] = ItemNormal_citta,
    [1232] = ItemNormal_citta,
    [1233] = ItemNormal_citta,
    [1234] = ItemNormal_citta,
    [1235] = ItemNormal_citta,
    [1236] = ItemNormal_citta,
    [1237] = ItemNormal_citta,
    [1238] = ItemNormal_citta,
    [1239] = ItemNormal_citta,
    [1240] = ItemNormal_citta,
    [1241] = ItemNormal_citta,
    [1242] = ItemNormal_citta,
    [1243] = ItemNormal_citta,
    [1244] = ItemNormal_citta,
    [1245] = ItemNormal_citta,
    [1246] = ItemNormal_citta,
    [1247] = ItemNormal_citta,
    [1248] = ItemNormal_citta,
    [1249] = ItemNormal_citta,
    [1250] = ItemNormal_citta,
    [1251] = ItemNormal_citta,
    [1252] = ItemNormal_citta,
    [1253] = ItemNormal_citta,
    [1254] = ItemNormal_citta,
    [1255] = ItemNormal_citta,
    [1256] = ItemNormal_citta,
    [1257] = ItemNormal_citta,
    [1258] = ItemNormal_citta,
    [1259] = ItemNormal_citta,
    [1260] = ItemNormal_citta,
    [1261] = ItemNormal_citta,
    [1262] = ItemNormal_citta,
    [1263] = ItemNormal_citta,
    [1264] = ItemNormal_citta,
    [1265] = ItemNormal_citta,
    [1266] = ItemNormal_citta,
    [1267] = ItemNormal_citta,
    [1268] = ItemNormal_citta,
    [1269] = ItemNormal_citta,
    [1270] = ItemNormal_citta,
    [1271] = ItemNormal_citta,
    [1272] = ItemNormal_citta,
    [1273] = ItemNormal_citta,
    [1274] = ItemNormal_citta,
    [1275] = ItemNormal_citta,
    [1276] = ItemNormal_citta,
    [1277] = ItemNormal_citta,
    [1278] = ItemNormal_citta,
    [1279] = ItemNormal_citta,
    [1280] = ItemNormal_citta,
    [1281] = ItemNormal_citta,
    [1282] = ItemNormal_citta,
    [1283] = ItemNormal_citta,
    [1284] = ItemNormal_citta,
    [1285] = ItemNormal_citta,
    [1286] = ItemNormal_citta,
    [1287] = ItemNormal_citta,
    [1288] = ItemNormal_citta,
    [1289] = ItemNormal_citta,
    [1290] = ItemNormal_citta,
    [1291] = ItemNormal_citta,
    [1292] = ItemNormal_citta,
    [1293] = ItemNormal_citta,
    [1294] = ItemNormal_citta,
    [1295] = ItemNormal_citta,
    [1296] = ItemNormal_citta,
    [1297] = ItemNormal_citta,
    [1298] = ItemNormal_citta,
    [1299] = ItemNormal_citta,
    [1300] = ItemNormal_citta,
    [1301] = ItemNormal_citta,
    [1302] = ItemNormal_citta,
    [1303] = ItemNormal_citta,

    [1000] = ItemNormal_formation,
    [1001] = ItemNormal_formation,
    [1002] = ItemNormal_formation,
    [1003] = ItemNormal_formation,
    [1004] = ItemNormal_formation,
    [1005] = ItemNormal_formation,
    [1006] = ItemNormal_formation,
    [1007] = ItemNormal_formation,
    [1008] = ItemNormal_formation,
    [1009] = ItemNormal_formation,
    [1010] = ItemNormal_formation,
    [1011] = ItemNormal_formation,

    [68] = ItemNormal_00000068,
    [67] = ItemNormal_00000067,

    [78] = ItemNormal_00000078,
    [79] = ItemNormal_00000079,
    [80] = ItemNormal_00000080,
    [81] = ItemNormal_00000081,

    --竞技场宝箱
    [2] = ItemNormal_athletics_2,
    [3] = ItemNormal_athletics_3,
    [4] = ItemNormal_athletics_4,
    [5] = ItemNormal_athletics_5,
    [6] = ItemNormal_athletics_6,

    [7] = ItemNormal_00000007,

    [22] = ItemNormal_athletics_22,
    [23] = ItemNormal_athletics_23,
    [24] = ItemNormal_athletics_24,
    [25] = ItemNormal_athletics_25
};

function RunItemNormalUse(itemId, num, bind, param)
	local trigger = ItemNormal_Table[itemId];
	if trigger == nil then
		return false;
	end
	return trigger(itemId, num, bind, param);	
end
