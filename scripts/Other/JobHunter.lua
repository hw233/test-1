-- 第四职业——寻墨相关lua配置
local normalMonster = {
    -- 普通怪物id
    [1] = {9532, 9533, 9534,9535,9536,9537,9538,9539,9540,9541,9542,9543,9544},
    [2] = {9547, 9548, 9549,9550,9551,9552,9553,9554,9555,9556,5557,9558,9559,9560,9561},
    [3] = {9564, 9565, 9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579},
    [4] = {9582, 9583, 9584,9585,9586,9587,9588,9589,9590,9591,9592,9593,9594,9595,9596,9597},
}

local bossMonster = {
    -- Boss id
    [1] = {9545,9546},
    [2] = {9562,9563},
    [3] = {9580,9581},
    [4] = {9598,9599},
}

local stepAward = {
    {{1325, 1, 1}},
    {{1326, 4, 1}},
    {{1326, 4, 1}},
    {{1326, 2, 1}},
    {{1326, 2, 1}},
    {{1326, 1, 1}},
    {{1326, 1, 1}},
    {{1326, 1, 1}},
    {{1326, 1, 1}},
    {{1326, 1, 1}},
    {{1327, 2, 1}},
    {{1327, 2, 1}},
    {{1327, 2, 1}},
    {{1327, 2, 1}},
    {{1327, 2, 1}},
    {{1327, 2, 1}},
    {{1327, 2, 1}},
    {{1327, 2, 1}},
    {{1327, 2, 1}},
    {{1327, 2, 1}},
}

local treasure1 = {
    -- 副本一宝箱配置
    {{5001,1,1}},
    {{5011,1,1}},
    {{5021,1,1}},
    {{5031,1,1}},
    {{5041,1,1}},
    {{5051,1,1}},
    {{5061,1,1}},
    {{5071,1,1}},
    {{5081,1,1}},
    {{5091,1,1}},
    {{5101,1,1}},
    {{5111,1,1}},
    {{5121,1,1}},
    {{5131,1,1}},
    {{56,1,1}},
    {{57,1,1}},
    {{1327,1,1}},
    {{133,1,1}},
    {{400,1,1}},
    {{51,1,1}},
    {{49,1,1}},
    {{50,1,1}},
    {{48,1,1}},
    {{509,1,1}},
    {{507,1,1}},
}

local treasure2 = {
    -- 副本二宝箱配置
    {{5001,1,1}},
    {{5011,1,1}},
    {{5021,1,1}},
    {{5031,1,1}},
    {{5041,1,1}},
    {{5051,1,1}},
    {{5061,1,1}},
    {{5071,1,1}},
    {{5081,1,1}},
    {{5091,1,1}},
    {{5101,1,1}},
    {{5111,1,1}},
    {{5121,1,1}},
    {{5131,1,1}},
    {{56,1,1}},
    {{57,1,1}},
    {{1327,1,1}},
    {{133,1,1}},
    {{400,1,1}},
    {{51,1,1}},
    {{49,1,1}},
    {{50,1,1}},
    {{48,1,1}},
    {{509,1,1}},
    {{507,1,1}},
}

local treasure3 = {
    -- 副本三宝箱配置
    {{5001,1,1}},
    {{5011,1,1}},
    {{5021,1,1}},
    {{5031,1,1}},
    {{5041,1,1}},
    {{5051,1,1}},
    {{5061,1,1}},
    {{5071,1,1}},
    {{5081,1,1}},
    {{5091,1,1}},
    {{5101,1,1}},
    {{5111,1,1}},
    {{5121,1,1}},
    {{5131,1,1}},
    {{56,1,1}},
    {{57,1,1}},
    {{1327,1,1}},
    {{133,1,1}},
    {{400,1,1}},
    {{51,1,1}},
    {{49,1,1}},
    {{50,1,1}},
    {{48,1,1}},
    {{509,1,1}},
    {{507,1,1}},
}

local treasure4 = {
    -- 副本四宝箱配置
    {{5001,1,1}},
    {{5011,1,1}},
    {{5021,1,1}},
    {{5031,1,1}},
    {{5041,1,1}},
    {{5051,1,1}},
    {{5061,1,1}},
    {{5071,1,1}},
    {{5081,1,1}},
    {{5091,1,1}},
    {{5101,1,1}},
    {{5111,1,1}},
    {{5121,1,1}},
    {{5131,1,1}},
    {{56,1,1}},
    {{57,1,1}},
    {{1327,1,1}},
    {{133,1,1}},
    {{400,1,1}},
    {{51,1,1}},
    {{49,1,1}},
    {{50,1,1}},
    {{48,1,1}},
    {{509,1,1}},
    {{507,1,1}},
}

-- 宝箱掉落概率配置
local chance1 = {200, 300, 400, 500, 600, 700, 800,900,1000,1100,1200,1300,1400,1500,2500,3500,4500,5500,6500,7500,8000,8500,9900,9950,10000}
local chance2 = {200, 300, 400, 500, 600, 700, 800,900,1000,1100,1200,1300,1400,1500,2500,3500,4500,5500,6500,7500,8000,8500,9900,9950,10000}
local chance3 = {200, 300, 400, 500, 600, 700, 800,900,1000,1100,1200,1300,1400,1500,2500,3500,4500,5500,6500,7500,8000,8500,9900,9950,10000}
local chance4 = {200, 300, 400, 500, 600, 700, 800,900,1000,1100,1200,1300,1400,1500,2500,3500,4500,5500,6500,7500,8000,8500,9900,9950,10000}

local treasure = {
    -- 宝箱道具
    [1] = treasure1,
    [2] = treasure2,
    [3] = treasure3,
    [4] = treasure4,
}

local chance = {
    -- 宝箱概率
    [1] = chance1,
    [2] = chance2,
    [3] = chance3,
    [4] = chance4,
}

local lengendMonster = {
    -- 神兽id, 下标为对应的等级，四个为四个等级的副本
    [1]  = {12051, 12052, 12053, 12054},
    [2]  = {12051, 12052, 12053, 12054},
    [3]  = {12051, 12052, 12053, 12054},
    [4]  = {12051, 12052, 12053, 12054},
    [5]  = {12051, 12052, 12053, 12054},
    [6]  = {12051, 12052, 12053, 12054},
    [7]  = {12051, 12052, 12053, 12054},
    [8]  = {12051, 12052, 12053, 12054},
    [9]  = {12051, 12052, 12053, 12054},
    [10] = {12051, 12052, 12053, 12054},
}

local specialItem = {
    -- 材料道具的配置(用于合成梦引)
    [1]  = {9286, 9287, 9288, 9289},
    [2]  = {9291, 9292, 9293, 9294},
    [3]  = {9296, 9297, 9298, 9299},
    [4]  = {9301, 9302, 9303, 9304},
}

function getRandomNormalMonster(id)
    if id >= 1 and id <= 4 then
        return normalMonster[id][math.random(1, #(normalMonster[id]))]
    else
        return 0
    end
end

function getBossMonster(id)
    if id >= 1 and id <= 4 then
        return bossMonster[id][math.random(1, #(bossMonster[id]))]
    else
        return 0
    end
end

function getLengendMonster(id, val)
    if id > 4 and id == 0 then
        return 0
    end
    val = val % 10
    if val > 10 then
        return 0
    end
    return lengendMonster[val][id]
end

function calcGridType(prob)
    local chanceType = {20, 75, 90, 95, 100}
    for i = 1, #chanceType do
        if prob <=chanceType[i] then
            return i
        end
    end
    return 0
end

function getTreasure(id)
    -- 获得相应宝箱的道具
    local prob = math.random(1, 10000)
    local chanceTmp = chance[id]
    for i = 1, #chanceTmp do
        if prob <= chanceTmp[i] then
            return treasure[id][i]
        end
    end
    print ("getTreasure error.")
end

function foundCave(id)
    -- 找到山洞后的的散仙ID
    return math.random(123,159)
end

--[[
function getStepAward(step)
    for i = 1, #stepAward do
        if i >= step then
            return stepAward[i]
        end
    end
    return stepAward[#stepAward]
end
]]--

local stepCount = 
{
    1,3,5,10,20
}
local stepAwardID =
{
    [1] = {
        20017, 20018, 20019, 20020, 20021,
    },
    [2] = {
        20022, 20023, 20024, 20025, 20026,
    },
    [3] = {
        20027, 20028, 20029, 20030, 20031,
    },
    [4] = {
        20032, 20033, 20034, 20035, 20036,
    },

}

function getStepAward(progress, step)
    if progress == 0 then
        return 0
    end
    if progress > #stepAwardID then
        return 0
    end
    local index = 0
    for i = 1,#stepCount do
        if stepCount[i] >= step then
            return stepAwardID[progress][i]
        end
    end
    return 0
end

function getSpecialItem(id, index)
    return specialItem[id][index];
end

